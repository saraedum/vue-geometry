(function(me,q){typeof exports=="object"&&typeof module<"u"?q(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],q):(me=typeof globalThis<"u"?globalThis:me||self,q(me["vue-geometry"]={},me.Vue))})(this,function(me,q){"use strict";var Fw=Object.defineProperty;var Bw=(me,q,_t)=>q in me?Fw(me,q,{enumerable:!0,configurable:!0,writable:!0,value:_t}):me[q]=_t;var zt=(me,q,_t)=>(Bw(me,typeof q!="symbol"?q+"":q,_t),_t);const yf={CCW:-1,CW:1,NOT_ORIENTABLE:0},mf=2*Math.PI,Yt=1,os=0,je=2,_f=3,bf=4,wf=1,xf=2,Ln=0,Cr=1,bt=2;var Nr=Object.freeze({CCW:!0,CW:!1,ORIENTATION:yf,PIx2:mf,INSIDE:Yt,OUTSIDE:os,BOUNDARY:je,CONTAINS:_f,INTERLACE:bf,OVERLAP_SAME:wf,OVERLAP_OPPOSITE:xf,NOT_VERTEX:Ln,START_VERTEX:Cr,END_VERTEX:bt});let Ue=1e-6;function ss(r){Ue=r}function as(){return Ue}const Sf=3;function Cn(r){return r<Ue&&r>-Ue}function st(r,e){return r-e<Ue&&r-e>-Ue}function ls(r,e){return r-e>Ue}function Ef(r,e){return r-e>-Ue}function us(r,e){return r-e<-Ue}function $f(r,e){return r-e<Ue}var Of=Object.freeze({setTolerance:ss,getTolerance:as,DECIMALS:Sf,EQ_0:Cn,EQ:st,GT:ls,GE:Ef,LT:us,LE:$f});class Nn{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}}let o={Utils:Of,Errors:Nn,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let r in Nr)o[r]=Nr[r];Object.defineProperty(o,"DP_TOL",{get:function(){return as()},set:function(r){ss(r)}});class Mn{constructor(e,t){this.first=e,this.last=t||this.first}static testInfiniteLoop(e){let t=e,n=e;do{if(t!=e&&t===n)throw o.Errors.INFINITE_LOOP;t=t.next,n=n.next.next}while(t!=e)}get size(){let e=0;for(let t of this)e++;return e}toArray(e=void 0,t=void 0){let n=[],i=e||this.first,s=t||this.last,a=i;if(a===void 0)return n;do n.push(a),a=a.next;while(a!==s.next);return n}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,t){if(this.isEmpty())this.first=e,this.last=e;else if(t==null)e.next=this.first,this.first.prev=e,this.first=e;else{let n=t.next;t.next=e,n&&(n.prev=e),e.prev=t,e.next=n,this.last===t&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}}function wt(r,e,t){let n=t.length,i=r.shape.split(e);if(i.length===0)return;let s=0;i[0]===null?s=0:i[1]===null?s=r.shape.length:s=i[0].length;let a=Ln;st(s,0)&&(a|=Cr),st(s,r.shape.length)&&(a|=bt);let l=a&bt&&r.next.arc_length===0?0:r.arc_length+s;t.push({id:n,pt:e,arc_length:l,edge_before:r,edge_after:void 0,face:r.face,is_vertex:a})}function Kt(r){r.int_points1_sorted=Qt(r.int_points1),r.int_points2_sorted=Qt(r.int_points2)}function Qt(r){let e=new Map,t=0;for(let i of r)e.has(i.face)||(e.set(i.face,t),t++);for(let i of r)i.faceId=e.get(i.face);return r.slice().sort(If)}function If(r,e){return r.faceId<e.faceId?-1:r.faceId>e.faceId?1:r.arc_length<e.arc_length?-1:r.arc_length>e.arc_length?1:0}function kn(r,e){return e.slice().sort((t,n)=>r.coord(t.pt)<r.coord(n.pt)?-1:r.coord(t.pt)>r.coord(n.pt)?1:0)}function Fn(r){if(r.int_points1.length<2)return;let e=!1,t,n,i,s;for(let a=0;a<r.int_points1_sorted.length;a++)if(r.int_points1_sorted[a].id!==-1){t=r.int_points1_sorted[a],n=r.int_points2[t.id];for(let l=a+1;l<r.int_points1_sorted.length&&(i=r.int_points1_sorted[l],!!st(i.arc_length,t.arc_length));l++)i.id!==-1&&(s=r.int_points2[i.id],s.id!==-1&&i.edge_before===t.edge_before&&i.edge_after===t.edge_after&&s.edge_before===n.edge_before&&s.edge_after===n.edge_after&&(i.id=-1,s.id=-1,e=!0))}n=r.int_points2_sorted[0],t=r.int_points1[n.id];for(let a=1;a<r.int_points2_sorted.length;a++){let l=r.int_points2_sorted[a];if(l.id==-1)continue;if(n.id==-1||!st(l.arc_length,n.arc_length)){n=l,t=r.int_points1[n.id];continue}let f=r.int_points1[l.id];f.edge_before===t.edge_before&&f.edge_after===t.edge_after&&l.edge_before===n.edge_before&&l.edge_after===n.edge_after&&(f.id=-1,l.id=-1,e=!0)}e&&(r.int_points1=r.int_points1.filter(a=>a.id>=0),r.int_points2=r.int_points2.filter(a=>a.id>=0),r.int_points1.forEach((a,l)=>a.id=l),r.int_points2.forEach((a,l)=>a.id=l))}function Bn(r){for(let e of r)e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0,e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0;for(let e of r)e.edge_before.bvEnd=je,e.edge_after.bvStart=je}function jn(r,e){for(let t of r)t.edge_before.setInclusion(e),t.edge_after.setInclusion(e)}function Pf(r){let e,t,n,i=r.int_points1.length;for(let s=0;s<i;s++){let a=r.int_points1_sorted[s];a.face!==e&&(t=s,e=a.face);let l=s,f=xt(r.int_points1_sorted,s,e),u;l+f<i&&r.int_points1_sorted[l+f].face===e?u=l+f:u=t;let c=xt(r.int_points1_sorted,u,e);n=null;for(let b=u;b<u+c;b++){let $=r.int_points1_sorted[b];if($.face===e&&r.int_points2[$.id].face===r.int_points2[a.id].face){n=$;break}}if(n===null)continue;let d=a.edge_after,g=n.edge_before;if(!(d.bv===je&&g.bv===je)||d!==g)continue;let S=r.int_points2[a.id],m=r.int_points2[n.id],_=S.edge_after,I=m.edge_before;_.bv===je&&I.bv===je&&_===I||(S=r.int_points2[n.id],m=r.int_points2[a.id],_=S.edge_after,I=m.edge_before),_.bv===je&&I.bv===je&&_===I&&d.setOverlap(_)}}function xt(r,e,t){let n,i,s=1;if(r.length==1)return 1;n=r[e];for(let a=e+1;a<r.length&&!(n.face!=t||(i=r[a],!(i.pt.equalTo(n.pt)&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after)));a++)s++;return s}function St(r,e){if(!!e){for(let t of e){let n=t.edge_before;if(t.is_vertex=Ln,n.shape.start&&n.shape.start.equalTo(t.pt)&&(t.is_vertex|=Cr),n.shape.end&&n.shape.end.equalTo(t.pt)&&(t.is_vertex|=bt),t.is_vertex&Cr){t.edge_before=n.prev,t.is_vertex=bt;continue}if(t.is_vertex&bt)continue;let i=r.addVertex(t.pt,n);t.edge_before=i}for(let t of e)t.edge_after=t.edge_before.next}}function fs(r,e,t){let n=r.edge_before,i=e.edge_after;n.next=t,t.prev=n,t.next=i,i.prev=t}const{INSIDE:De,OUTSIDE:Ve,BOUNDARY:ue,OVERLAP_SAME:Tf,OVERLAP_OPPOSITE:Af}=Nr,{NOT_VERTEX:Uw,START_VERTEX:cs,END_VERTEX:hs}=Nr,Mr=1,Ht=2,at=3;function Rf(r,e){let[t,n]=Xt(r,e,Mr,!0);return t}function Un(r,e){let n=e.clone().reverse(),[i,s]=Xt(r,n,at,!0);return i}function ds(r,e){let[t,n]=Xt(r,e,Ht,!0);return t}function ps(r,e){let[t,n]=Xt(r,e,Ht,!1),i=[];for(let a of t.faces)i=[...i,...[...a.edges].map(l=>l.shape)];let s=[];for(let a of n.faces)s=[...s,...[...a.edges].map(l=>l.shape)];return[i,s]}function Dn(r,e){let[t,n]=Xt(r,e,at,!1),i=[];for(let s of t.faces)i=[...i,...[...s.edges].map(a=>a.shape)];return i}function vs(r,e){let t=r.clone(),n=e.clone(),i=gs(t,n);Kt(i),St(t,i.int_points1_sorted),St(n,i.int_points2_sorted),Fn(i),Kt(i);let s=i.int_points1_sorted.map(l=>l.pt),a=i.int_points2_sorted.map(l=>l.pt);return[s,a]}function Lf(r,e,t,n){let i=ys(r,t.int_points1),s=ys(e,t.int_points2);for(ms(i,e),ms(s,r),Bn(t.int_points1),Bn(t.int_points2),jn(t.int_points1,e),jn(t.int_points2,r);Nf(r,e,t.int_points1,t.int_points1_sorted,t.int_points2,t););Pf(t),Vn(r,n,t.int_points1_sorted,!0),Vn(e,n,t.int_points2_sorted,!1),_s(r,i,n,!0),_s(e,s,n,!1)}function Cf(r,e,t,n){Mf(r,e,n,t.int_points2),kf(r,e,t),Gn(r,t.int_points1),Gn(e,t.int_points2),qn(r,t.int_points1,t.int_points2),qn(r,t.int_points2,t.int_points1)}function Xt(r,e,t,n){let i=r.clone(),s=e.clone(),a=gs(i,s);return Kt(a),St(i,a.int_points1_sorted),St(s,a.int_points2_sorted),Fn(a),Kt(a),Lf(i,s,a,t),n&&Cf(i,s,a,t),[i,s]}function gs(r,e){let t={int_points1:[],int_points2:[]};for(let n of r.edges){let i=e.edges.search(n.box);for(let s of i){let a=n.shape.intersect(s.shape);for(let l of a)wt(n,l,t.int_points1),wt(s,l,t.int_points2)}}return t}function ys(r,e){let t=[];for(let n of r.faces)e.find(i=>i.face===n)||t.push(n);return t}function ms(r,e){for(let t of r)t.first.bv=t.first.bvStart=t.first.bvEnd=void 0,t.first.setInclusion(e)}function Nf(r,e,t,n,i,s){let a,l,f,u=n.length,c=!1;for(let d=0;d<u;d++){let g=n[d];g.face!==a&&(l=d,a=g.face);let S=d,m=xt(n,d,a),_;S+m<u&&n[S+m].face===a?_=S+m:_=l;let I=xt(n,_,a);f=null;for(let h=_;h<_+I;h++){let p=n[h];if(p.face===a&&i[p.id].face===i[g.id].face){f=p;break}}if(f===null)continue;let b=g.edge_after,$=f.edge_before;if(b.bv===ue&&$.bv!=ue){b.bv=$.bv;continue}if(b.bv!=ue&&$.bv===ue){$.bv=b.bv;continue}if(b.bv===ue&&$.bv===ue&&b!=$||b.bv===De&&$.bv===Ve||b.bv===Ve&&$.bv===De){let h=b.next;for(;h!=$;)h.bvStart=void 0,h.bvEnd=void 0,h.bv=void 0,h.setInclusion(e),h=h.next}if(b.bv===ue&&$.bv===ue&&b!=$){let h=b.next,p;for(;h!=$;){if(h.bv!=ue){if(p===void 0)p=h.bv;else if(h.bv!=p)throw Nn.UNRESOLVED_BOUNDARY_CONFLICT}h=h.next}p!=null&&(b.bv=p,$.bv=p);continue}if(b.bv===De&&$.bv===Ve||b.bv===Ve&&$.bv===De){let h=b;for(;h!=$;){if(h.bvStart===b.bv&&h.bvEnd===$.bv){let[p,v]=h.shape.distanceTo(e);if(p<10*o.DP_TOL){wt(h,v.ps,t);let E=t[t.length-1];if(E.is_vertex&cs)E.edge_after=h,E.edge_before=h.prev,h.bvStart=ue,h.bv=void 0,h.setInclusion(e);else if(E.is_vertex&hs)E.edge_after=h.next,h.bvEnd=ue,h.bv=void 0,h.setInclusion(e);else{let T=e.addVertex(E.pt,h);E.edge_before=T,E.edge_after=T.next,T.setInclusion(e),T.next.bvStart=ue,T.next.bvEnd=void 0,T.next.bv=void 0,T.next.setInclusion(e)}let O=e.findEdgeByPoint(v.pe);wt(O,v.pe,i);let w=i[i.length-1];if(w.is_vertex&cs)w.edge_after=O,w.edge_before=O.prev;else if(w.is_vertex&hs)w.edge_after=O.next;else{let T=i.find(k=>k.edge_after===O),L=e.addVertex(w.pt,O);w.edge_before=L,w.edge_after=L.next,T&&(T.edge_after=L),L.bvStart=void 0,L.bvEnd=ue,L.bv=void 0,L.setInclusion(r),L.next.bvStart=ue,L.next.bvEnd=void 0,L.next.bv=void 0,L.next.setInclusion(r)}Kt(s),c=!0;break}}h=h.next}if(c)break;throw Nn.UNRESOLVED_BOUNDARY_CONFLICT}}return c}function Vn(r,e,t,n){if(!t)return;let i,s,a,l;for(let f=0;f<t.length;f++){if(a=t[f],a.face!==i&&(s=f,i=a.face),i.isEmpty())continue;let u=f,c=xt(t,f,i),d;u+c<t.length&&t[u+c].face===a.face?d=u+c:d=s,l=t[d];let g=d,S=xt(t,g,i),m=a.edge_after,_=l.edge_before;if(m.bv===De&&_.bv===De&&e===Mr||m.bv===Ve&&_.bv===Ve&&e===Ht||(m.bv===Ve||_.bv===Ve)&&e===at&&!n||(m.bv===De||_.bv===De)&&e===at&&n||m.bv===ue&&_.bv===ue&&m.overlap&Tf&&n||m.bv===ue&&_.bv===ue&&m.overlap&Af){r.removeChain(i,m,_);for(let I=u;I<u+c;I++)t[I].edge_after=void 0;for(let I=g;I<g+S;I++)t[I].edge_before=void 0}f+=c-1}}function Mf(r,e,t,n){for(let i of e.faces){for(let s of i)r.edges.add(s);n.find(s=>s.face===i)===void 0&&r.addFace(i.first,i.last)}}function kf(r,e,t){if(t.int_points1.length!==0)for(let n=0;n<t.int_points1.length;n++){let i=t.int_points1[n],s=t.int_points2[n];if(i.edge_before!==void 0&&i.edge_after===void 0&&s.edge_before===void 0&&s.edge_after!==void 0&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before),s.edge_before!==void 0&&s.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(s.edge_before.next=i.edge_after,i.edge_after.prev=s.edge_before,s.edge_after=i.edge_after,i.edge_before=s.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let a of t.int_points1_sorted)a!==i&&a.edge_before===void 0&&a.edge_after!==void 0&&a.pt.equalTo(i.pt)&&(i.edge_before.next=a.edge_after,a.edge_after.prev=i.edge_before,i.edge_after=a.edge_after,a.edge_before=i.edge_before);if(s.edge_before!==void 0&&s.edge_after===void 0)for(let a of t.int_points2_sorted)a!==s&&a.edge_before===void 0&&a.edge_after!==void 0&&a.pt.equalTo(s.pt)&&(s.edge_before.next=a.edge_after,a.edge_after.prev=s.edge_before,s.edge_after=a.edge_after,a.edge_before=s.edge_before)}}function Gn(r,e){for(let t of e)r.faces.delete(t.face),t.face=void 0,t.edge_before&&(t.edge_before.face=void 0),t.edge_after&&(t.edge_after.face=void 0)}function qn(r,e,t){for(let n of e){if(n.edge_before===void 0||n.edge_after===void 0||n.face||n.edge_after.face||n.edge_before.face)continue;let i=n.edge_after,s=n.edge_before;Mn.testInfiniteLoop(i);let a=r.addFace(i,s);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===a&&l.edge_after.face===a&&(l.face=a);for(let l of t)l.edge_before&&l.edge_after&&l.edge_before.face===a&&l.edge_after.face===a&&(l.face=a)}}function _s(r,e,t,n){for(let i of e){let s=i.first.bv;(t===Mr&&s===De||t===at&&s===De&&n||t===at&&s===Ve&&!n||t===Ht&&s===Ve)&&r.deleteFace(i)}}var Ff=Object.freeze({BOOLEAN_UNION:Mr,BOOLEAN_INTERSECT:Ht,BOOLEAN_SUBTRACT:at,unify:Rf,subtract:Un,intersect:ds,innerClip:ps,outerClip:Dn,calculateIntersections:vs,removeNotRelevantChains:Vn,removeOldFaces:Gn,restoreFaces:qn});const Bf=RegExp("T.F..FFF.|T.F...F.."),jf=RegExp("T........|.T.......|...T.....|....T...."),Uf=RegExp("FT.......|F..T.....|F...T...."),Df=RegExp("T.F..F..."),Vf=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Et{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return Bf.test(this.toString())}intersect(){return jf.test(this.toString())}touch(){return Uf.test(this.toString())}inside(){return Df.test(this.toString())}covered(){return Vf.test(this.toString())}}function kr(r,e){let t=[],[n,i,s]=r.standard,[a,l,f]=e.standard,u=n*l-i*a,c=s*l-i*f,d=n*f-s*a;if(!o.Utils.EQ_0(u)){let g,S;i===0?(g=s/n,S=d/u):l===0?(g=f/a,S=d/u):n===0?(g=c/u,S=s/i):a===0?(g=c/u,S=f/l):(g=c/u,S=d/u),t.push(new o.Point(g,S))}return t}function $t(r,e){let t=[],n=e.pc.projectionOn(r),i=e.pc.distanceTo(n)[0];if(o.Utils.EQ(i,e.r))t.push(n);else if(o.Utils.LT(i,e.r)){let s=Math.sqrt(e.r*e.r-i*i),a,l;a=r.norm.rotate90CCW().multiply(s),l=n.translate(a),t.push(l),a=r.norm.rotate90CW().multiply(s),l=n.translate(a),t.push(l)}return t}function Jt(r,e){let t=[];for(let n of e.toSegments()){let i=Fr(n,r);for(let s of i)Ss(s,t)||t.push(s)}return t}function Wn(r,e){let t=[];if(Jt(r,e.box).length===0)return t;let n=new o.Circle(e.pc,e.r),i=$t(r,n);for(let s of i)s.on(e)&&t.push(s);return t}function Fr(r,e){let t=[];if(r.ps.on(e)&&t.push(r.ps),r.pe.on(e)&&!r.isZeroLength()&&t.push(r.pe),t.length>0||r.isZeroLength()||r.ps.leftTo(e)&&r.pe.leftTo(e)||!r.ps.leftTo(e)&&!r.pe.leftTo(e))return t;let n=new o.Line(r.ps,r.pe);return kr(n,e)}function Zt(r,e){let t=[];if(r.box.not_intersect(e.box))return t;if(r.isZeroLength())return r.ps.on(e)&&t.push(r.ps),t;if(e.isZeroLength())return e.ps.on(r)&&t.push(e.ps),t;let n=new o.Line(r.ps,r.pe),i=new o.Line(e.ps,e.pe);if(n.incidentTo(i))r.ps.on(e)&&t.push(r.ps),r.pe.on(e)&&t.push(r.pe),e.ps.on(r)&&!e.ps.equalTo(r.ps)&&!e.ps.equalTo(r.pe)&&t.push(e.ps),e.pe.on(r)&&!e.pe.equalTo(r.ps)&&!e.pe.equalTo(r.pe)&&t.push(e.pe);else{let s=kr(n,i);s.length>0&&s[0].on(r)&&s[0].on(e)&&t.push(s[0])}return t}function Br(r,e){let t=[];if(r.box.not_intersect(e.box))return t;if(r.isZeroLength()){let[s,a]=r.ps.distanceTo(e.pc);return o.Utils.EQ(s,e.r)&&t.push(r.ps),t}let n=new o.Line(r.ps,r.pe),i=$t(n,e);for(let s of i)s.on(r)&&t.push(s);return t}function lt(r,e){let t=[];if(r.box.not_intersect(e.box))return t;if(r.isZeroLength())return r.ps.on(e)&&t.push(r.ps),t;let n=new o.Line(r.ps,r.pe),i=new o.Circle(e.pc,e.r),s=$t(n,i);for(let a of s)a.on(r)&&a.on(e)&&t.push(a);return t}function Gf(r,e){let t=[];for(let n of e.toSegments()){let i=Zt(n,r);for(let s of i)t.push(s)}return t}function bs(r,e){let t=[];if(r.box.not_intersect(e.box))return t;let n=new o.Vector(r.pc,e.pc),i=r.r,s=e.r;if(o.Utils.EQ_0(i)||o.Utils.EQ_0(s))return t;if(o.Utils.EQ_0(n.x)&&o.Utils.EQ_0(n.y)&&o.Utils.EQ(i,s))return t.push(r.pc.translate(-i,0)),t;let a=r.pc.distanceTo(e.pc)[0];if(o.Utils.GT(a,i+s)||o.Utils.LT(a,Math.abs(i-s)))return t;n.x/=a,n.y/=a;let l;if(o.Utils.EQ(a,i+s)||o.Utils.EQ(a,Math.abs(i-s)))return l=r.pc.translate(i*n.x,i*n.y),t.push(l),t;let f=i*i/(2*a)-s*s/(2*a)+a/2,u=r.pc.translate(f*n.x,f*n.y),c=Math.sqrt(i*i-f*f);return l=u.translate(n.rotate90CCW().multiply(c)),t.push(l),l=u.translate(n.rotate90CW().multiply(c)),t.push(l),t}function qf(r,e){let t=[];for(let n of e.toSegments()){let i=Br(n,r);for(let s of i)t.push(s)}return t}function zn(r,e){var t=[];if(r.box.not_intersect(e.box))return t;if(r.pc.equalTo(e.pc)&&o.Utils.EQ(r.r,e.r)){let a;return a=r.start,a.on(e)&&t.push(a),a=r.end,a.on(e)&&t.push(a),a=e.start,a.on(r)&&t.push(a),a=e.end,a.on(r)&&t.push(a),t}let n=new o.Circle(r.pc,r.r),i=new o.Circle(e.pc,e.r),s=n.intersect(i);for(let a of s)a.on(r)&&a.on(e)&&t.push(a);return t}function Yn(r,e){let t=[];if(r.box.not_intersect(e.box))return t;if(e.pc.equalTo(r.pc)&&o.Utils.EQ(e.r,r.r))return t.push(r.start),t.push(r.end),t;let n=e,i=new o.Circle(r.pc,r.r),s=bs(n,i);for(let a of s)a.on(r)&&t.push(a);return t}function Wf(r,e){let t=[];for(let n of e.toSegments()){let i=lt(n,r);for(let s of i)t.push(s)}return t}function zf(r,e){return r.isSegment()?Zt(r.shape,e):lt(e,r.shape)}function Yf(r,e){return r.isSegment()?lt(r.shape,e):zn(r.shape,e)}function ws(r,e){return r.isSegment()?Fr(r.shape,e):Wn(e,r.shape)}function Kf(r,e){return r.isSegment()?Br(r.shape,e):Yn(r.shape,e)}function Kn(r,e){let t=[];for(let n of e.edges)for(let i of zf(n,r))t.push(i);return t}function Qn(r,e){let t=[];for(let n of e.edges)for(let i of Yf(n,r))t.push(i);return t}function jr(r,e){let t=[];if(e.isEmpty())return t;for(let n of e.edges)for(let i of ws(n,r))Ss(i,t)||t.push(i);return r.sortPoints(t)}function xs(r,e){let t=[];if(e.isEmpty())return t;for(let n of e.edges)for(let i of Kf(n,r))t.push(i);return t}function Qf(r,e){const t=r.shape,n=e.shape;return r.isSegment()?e.isSegment()?Zt(t,n):lt(t,n):e.isSegment()?lt(n,t):zn(t,n)}function Hf(r,e){let t=[];if(e.isEmpty()||r.shape.box.not_intersect(e.box))return t;let n=e.edges.search(r.shape.box);for(let i of n)for(let s of Qf(r,i))t.push(s);return t}function Xf(r,e){let t=[];if(r.isEmpty()||e.isEmpty()||r.box.not_intersect(e.box))return t;for(let n of r.edges)for(let i of Hf(n,e))t.push(i);return t}function Jf(r,e){return r instanceof o.Line?jr(r,e):r instanceof o.Segment?Kn(r,e):r instanceof o.Arc?Qn(r,e):[]}function Ss(r,e){return e.some(t=>t.equalTo(r))}class ke extends Mn{constructor(...e){if(super(),e.length!==0&&e.length==1&&e[0]instanceof Array){let t=e[0];if(t.length==0)return;t.every(n=>n instanceof o.Segment||n instanceof o.Arc||n instanceof o.Ray||n instanceof o.Line);for(let n of t){let i=new o.Edge(n);this.append(i)}}}get edges(){return[...this]}get box(){return this.edges.reduce((e,t)=>e=e.merge(t.box),new o.Box)}get vertices(){let e=this.edges.map(t=>t.start);return e.push(this.last.end),e}clone(){return new ke(this.toShapes())}addVertex(e,t){let n=t.shape.split(e);if(n[0]===null)return t.prev;if(n[1]===null)return t;let i=new o.Edge(n[0]),s=t.prev;return this.insert(i,s),t.shape=n[1],i}split(e){for(let t of e){let n=this.findEdgeByPoint(t);this.addVertex(t,n)}return this}findEdgeByPoint(e){let t;for(let n of this)if(n.shape.contains(e)){t=n;break}return t}translate(e){return new ke(this.edges.map(t=>t.shape.translate(e)))}rotate(e=0,t=new o.Point){return new ke(this.edges.map(n=>n.shape.rotate(e,t)))}transform(e=new o.Matrix){return new ke(this.edges.map(t=>t.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svg(e={}){let{stroke:t,strokeWidth:n,fill:i,fillRule:s,fillOpacity:a,id:l,className:f}=e,u=l&&l.length>0?`id="${l}"`:"",c=f&&f.length>0?`class="${f}"`:"",d=`
<path stroke="${t||"black"}" stroke-width="${n||1}" fill="${i||"none"}" fill-opacity="${a||1}" ${u} ${c} d="`;d+=`
M${this.first.start.x},${this.first.start.y}`;for(let g of this)d+=g.svg();return d+=`" >
</path>`,d}}o.Multiline=ke;const Zf=(...r)=>new o.Multiline(...r);o.multiline=Zf;function er(r,e){let t,n=new o.Ray(e),i=new o.Line(n.pt,n.norm);const s=new o.Box(n.box.xmin-o.DP_TOL,n.box.ymin-o.DP_TOL,n.box.xmax,n.box.ymax+o.DP_TOL);if(r.box.not_intersect(s))return o.OUTSIDE;let a=r.edges.search(s);if(a.length==0)return o.OUTSIDE;for(let u of a)if(u.shape.contains(e))return o.BOUNDARY;let l=[];for(let u of a)for(let c of n.intersect(u.shape)){if(c.equalTo(e))return o.BOUNDARY;l.push({pt:c,edge:u})}l.sort((u,c)=>us(u.pt.x,c.pt.x)?-1:ls(u.pt.x,c.pt.x)?1:0);let f=0;for(let u=0;u<l.length;u++){let c=l[u];if(c.pt.equalTo(c.edge.shape.start)){if(u>0&&c.pt.equalTo(l[u-1].pt)&&c.edge.prev===l[u-1].edge)continue;let d=c.edge.prev;for(;Cn(d.length);)d=d.prev;let g=d.shape.tangentInEnd(),S=c.pt.translate(g),m=c.edge.shape.tangentInStart(),_=c.pt.translate(m),I=S.leftTo(i),b=_.leftTo(i);(I&&!b||!I&&b)&&f++}else if(c.pt.equalTo(c.edge.shape.end)){if(u>0&&c.pt.equalTo(l[u-1].pt)&&c.edge.next===l[u-1].edge)continue;let d=c.edge.next;for(;Cn(d.length);)d=d.next;let g=d.shape.tangentInStart(),S=c.pt.translate(g),m=c.edge.shape.tangentInEnd(),_=c.pt.translate(m),I=S.leftTo(i),b=_.leftTo(i);(I&&!b||!I&&b)&&f++}else if(c.edge.shape instanceof o.Segment)f++;else{let d=c.edge.shape.box;st(c.pt.y,d.ymin)||st(c.pt.y,d.ymax)||f++}}return t=f%2==1?Yt:os,t}function ec(r,e){return Ot(r,e).equal()}function Es(r,e){return Ot(r,e).intersect()}function tc(r,e){return Ot(r,e).touch()}function rc(r,e){return!Es(r,e)}function $s(r,e){return Ot(r,e).inside()}function Os(r,e){return Ot(r,e).covered()}function nc(r,e){return $s(e,r)}function Is(r,e){return Os(e,r)}function Ot(r,e){if(r instanceof o.Line&&e instanceof o.Line)return ic(r,e);if(r instanceof o.Line&&e instanceof o.Circle)return oc(r,e);if(r instanceof o.Line&&e instanceof o.Box)return sc(r,e);if(r instanceof o.Line&&e instanceof o.Polygon)return ac(r,e);if((r instanceof o.Segment||r instanceof o.Arc)&&e instanceof o.Polygon)return Ps(r,e);if((r instanceof o.Segment||r instanceof o.Arc)&&(e instanceof o.Circle||e instanceof o.Box))return Ps(r,new o.Polygon(e));if(r instanceof o.Polygon&&e instanceof o.Polygon)return Ur(r,e);if((r instanceof o.Circle||r instanceof o.Box)&&(e instanceof o.Circle||e instanceof o.Box))return Ur(new o.Polygon(r),new o.Polygon(e));if((r instanceof o.Circle||r instanceof o.Box)&&e instanceof o.Polygon)return Ur(new o.Polygon(r),e);if(r instanceof o.Polygon&&(e instanceof o.Circle||e instanceof o.Box))return Ur(r,new o.Polygon(e))}function ic(r,e){let t=new Et,n=kr(r,e);return n.length===0?r.contains(e.pt)&&e.contains(r.pt)?(t.I2I=[r],t.I2E=[],t.E2I=[]):(t.I2I=[],t.I2E=[r],t.E2I=[e]):(t.I2I=n,t.I2E=r.split(n),t.E2I=e.split(n)),t}function oc(r,e){let t=new Et,n=$t(r,e);if(n.length===0)t.I2I=[],t.I2B=[],t.I2E=[r],t.E2I=[e];else if(n.length===1)t.I2I=[],t.I2B=n,t.I2E=r.split(n),t.E2I=[e];else{let i=new ke([r]),s=r.sortPoints(n);i.split(s);let a=i.toShapes();t.I2I=[a[1]],t.I2B=s,t.I2E=[a[0],a[2]],t.E2I=new o.Polygon([e.toArc()]).cut(i)}return t}function sc(r,e){let t=new Et,n=Jt(r,e);if(n.length===0)t.I2I=[],t.I2B=[],t.I2E=[r],t.E2I=[e];else if(n.length===1)t.I2I=[],t.I2B=n,t.I2E=r.split(n),t.E2I=[e];else{let i=new ke([r]),s=r.sortPoints(n);i.split(s);let a=i.toShapes();e.toSegments().some(l=>l.contains(n[0])&&l.contains(n[1]))?(t.I2I=[],t.I2B=[a[1]],t.I2E=[a[0],a[2]],t.E2I=[e]):(t.I2I=[a[1]],t.I2B=s,t.I2E=[a[0],a[2]],t.E2I=new o.Polygon(e.toSegments()).cut(i))}return t}function ac(r,e){let t=new Et,n=jr(r,e),i=new ke([r]),s=n.length>0?n.slice():r.sortPoints(n);return i.split(s),[...i].forEach(a=>a.setInclusion(e)),t.I2I=[...i].filter(a=>a.bv===o.INSIDE).map(a=>a.shape),t.I2B=[...i].slice(1).map(a=>a.bv===o.BOUNDARY?a.shape:a.shape.start),t.I2E=[...i].filter(a=>a.bv===o.OUTSIDE).map(a=>a.shape),t.E2I=e.cut(i),t}function Ps(r,e){let t=new Et,n=Jf(r,e),i=n.length>0?n.slice():r.sortPoints(n),s=new ke([r]);s.split(i),[...s].forEach(a=>a.setInclusion(e)),t.I2I=[...s].filter(a=>a.bv===o.INSIDE).map(a=>a.shape),t.I2B=[...s].slice(1).map(a=>a.bv===o.BOUNDARY?a.shape:a.shape.start),t.I2E=[...s].filter(a=>a.bv===o.OUTSIDE).map(a=>a.shape),t.B2I=[],t.B2B=[],t.B2E=[];for(let a of[r.start,r.end])switch(er(e,a)){case o.INSIDE:t.B2I.push(a);break;case o.BOUNDARY:t.B2B.push(a);break;case o.OUTSIDE:t.B2E.push(a);break}return t}function Ur(r,e){let t=new Et,[n,i]=vs(r,e),s=ds(r,e),a=Un(r,e),l=Un(e,r),[f,u]=ps(r,e),c=Dn(r,e),d=Dn(e,r);return t.I2I=s.isEmpty()?[]:[s],t.I2B=u,t.I2E=a.isEmpty()?[]:[a],t.B2I=f,t.B2B=n,t.B2E=c,t.E2I=l.isEmpty()?[]:[l],t.E2B=d,t}var lc=Object.freeze({equal:ec,intersect:Es,touch:tc,disjoint:rc,inside:$s,covered:Os,contain:nc,cover:Is,relate:Ot});class ut{constructor(e=1,t=0,n=0,i=1,s=0,a=0){this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a}clone(){return new ut(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new ut(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let t,n;if(e.length==1&&e[0]instanceof o.Vector)t=e[0].x,n=e[0].y;else if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")t=e[0],n=e[1];else throw o.Errors.ILLEGAL_PARAMETERS;return this.multiply(new ut(1,0,0,1,t,n))}rotate(e){let t=Math.cos(e),n=Math.sin(e);return this.multiply(new ut(t,n,-n,t,0,0))}scale(e,t){return this.multiply(new ut(e,0,0,t,0,0))}equalTo(e){return!(!o.Utils.EQ(this.tx,e.tx)||!o.Utils.EQ(this.ty,e.ty)||!o.Utils.EQ(this.a,e.a)||!o.Utils.EQ(this.b,e.b)||!o.Utils.EQ(this.c,e.c)||!o.Utils.EQ(this.d,e.d))}}o.Matrix=ut;const uc=(...r)=>new o.Matrix(...r);o.matrix=uc;const fc=class is{constructor(e,t){this.low=e,this.high=t}clone(){return new is(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new is(this.low===void 0?e.low:Math.min(this.low,e.low),this.high===void 0?e.high:Math.max(this.high,e.high))}output(){return[this.low,this.high]}static comparable_max(e,t){return e.merge(t)}static comparable_less_than(e,t){return e<t}},pe=0,W=1;class It{constructor(e=void 0,t=void 0,n=null,i=null,s=null,a=W){this.left=n,this.right=i,this.parent=s,this.color=a,this.item={key:e,value:t},e&&e instanceof Array&&e.length==2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])&&(this.item.key=new fc(Math.min(e[0],e[1]),Math.max(e[0],e[1]))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===W}less_than(e){if(this.item.value===this.item.key&&e.item.value===e.item.key)return this.item.key.less_than(e.item.key);{let t=this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value;return this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&t}}equal_to(e){if(this.item.value===this.item.key&&e.item.value===e.item.key)return this.item.key.equal_to(e.item.key);{let t=this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value==e.item.value;return this.item.key.equal_to(e.item.key)&&t}}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const t=this.item.key.constructor.comparable_less_than;let n=this.left.max.high!==void 0?this.left.max.high:this.left.max;return t(n,e.item.key.low)}not_intersect_right_subtree(e){const t=this.item.key.constructor.comparable_less_than;let n=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return t(e.item.key.high,n)}}class tr{constructor(){this.root=null,this.nil_node=new It}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,t=>e.push(t.item.key.output?t.item.key.output():t.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,t=>e.push(t.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,t=>e.push({key:t.item.key.output?t.item.key.output():t.item.key,value:t.item.value})),e}isEmpty(){return this.root==null||this.root==this.nil_node}clear(){this.root=null}insert(e,t=e){if(e===void 0)return;let n=new It(e,t,this.nil_node,this.nil_node,null,pe);return this.tree_insert(n),this.recalc_max(n),n}exist(e,t=e){let n=new It(e,t);return!!this.tree_search(this.root,n)}remove(e,t=e){let n=new It(e,t),i=this.tree_search(this.root,n);return i&&this.tree_delete(i),i}search(e,t=(n,i)=>n===i?i.output():n){let n=new It(e),i=[];return this.tree_search_interval(this.root,n,i),i.map(s=>t(s.item.value,s.item.key))}intersect_any(e){let t=new It(e);return this.tree_find_any_interval(this.root,t)}forEach(e){this.tree_walk(this.root,t=>e(t.item.key,t.item.value))}map(e){const t=new tr;return this.tree_walk(this.root,n=>t.insert(n.item.key,e(n.item.value,n.item.key))),t}recalc_max(e){let t=e;for(;t.parent!=null;)t.parent.update_max(),t=t.parent}tree_insert(e){let t=this.root,n=null;if(this.root==null||this.root==this.nil_node)this.root=e;else{for(;t!=this.nil_node;)n=t,e.less_than(t)?t=t.left:t=t.right;e.parent=n,e.less_than(n)?n.left=e:n.right=e}this.insert_fixup(e)}insert_fixup(e){let t,n;for(t=e;t!=this.root&&t.parent.color==pe;)t.parent==t.parent.parent.left?(n=t.parent.parent.right,n.color==pe?(t.parent.color=W,n.color=W,t.parent.parent.color=pe,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.rotate_left(t)),t.parent.color=W,t.parent.parent.color=pe,this.rotate_right(t.parent.parent))):(n=t.parent.parent.left,n.color==pe?(t.parent.color=W,n.color=W,t.parent.parent.color=pe,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.rotate_right(t)),t.parent.color=W,t.parent.parent.color=pe,this.rotate_left(t.parent.parent)));this.root.color=W}tree_delete(e){let t,n;e.left==this.nil_node||e.right==this.nil_node?t=e:t=this.tree_successor(e),t.left!=this.nil_node?n=t.left:n=t.right,n.parent=t.parent,t==this.root?this.root=n:(t==t.parent.left?t.parent.left=n:t.parent.right=n,t.parent.update_max()),this.recalc_max(n),t!=e&&(e.copy_data(t),e.update_max(),this.recalc_max(e)),t.color==W&&this.delete_fixup(n)}delete_fixup(e){let t=e,n;for(;t!=this.root&&t.parent!=null&&t.color==W;)t==t.parent.left?(n=t.parent.right,n.color==pe&&(n.color=W,t.parent.color=pe,this.rotate_left(t.parent),n=t.parent.right),n.left.color==W&&n.right.color==W?(n.color=pe,t=t.parent):(n.right.color==W&&(n.color=pe,n.left.color=W,this.rotate_right(n),n=t.parent.right),n.color=t.parent.color,t.parent.color=W,n.right.color=W,this.rotate_left(t.parent),t=this.root)):(n=t.parent.left,n.color==pe&&(n.color=W,t.parent.color=pe,this.rotate_right(t.parent),n=t.parent.left),n.left.color==W&&n.right.color==W?(n.color=pe,t=t.parent):(n.left.color==W&&(n.color=pe,n.right.color=W,this.rotate_left(n),n=t.parent.left),n.color=t.parent.color,t.parent.color=W,n.left.color=W,this.rotate_right(t.parent),t=this.root));t.color=W}tree_search(e,t){if(!(e==null||e==this.nil_node))return t.equal_to(e)?e:t.less_than(e)?this.tree_search(e.left,t):this.tree_search(e.right,t)}tree_search_interval(e,t,n){e!=null&&e!=this.nil_node&&(e.left!=this.nil_node&&!e.not_intersect_left_subtree(t)&&this.tree_search_interval(e.left,t,n),e.intersect(t)&&n.push(e),e.right!=this.nil_node&&!e.not_intersect_right_subtree(t)&&this.tree_search_interval(e.right,t,n))}tree_find_any_interval(e,t){let n=!1;return e!=null&&e!=this.nil_node&&(e.left!=this.nil_node&&!e.not_intersect_left_subtree(t)&&(n=this.tree_find_any_interval(e.left,t)),n||(n=e.intersect(t)),!n&&e.right!=this.nil_node&&!e.not_intersect_right_subtree(t)&&(n=this.tree_find_any_interval(e.right,t))),n}local_minimum(e){let t=e;for(;t.left!=null&&t.left!=this.nil_node;)t=t.left;return t}local_maximum(e){let t=e;for(;t.right!=null&&t.right!=this.nil_node;)t=t.right;return t}tree_successor(e){let t,n,i;if(e.right!=this.nil_node)t=this.local_minimum(e.right);else{for(n=e,i=e.parent;i!=null&&i.right==n;)n=i,i=i.parent;t=i}return t}rotate_left(e){let t=e.right;e.right=t.left,t.left!=this.nil_node&&(t.left.parent=e),t.parent=e.parent,e==this.root?this.root=t:e==e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,e!=null&&e!=this.nil_node&&e.update_max(),t=e.parent,t!=null&&t!=this.nil_node&&t.update_max()}rotate_right(e){let t=e.left;e.left=t.right,t.right!=this.nil_node&&(t.right.parent=e),t.parent=e.parent,e==this.root?this.root=t:e==e.parent.left?e.parent.left=t:e.parent.right=t,t.right=e,e.parent=t,e!=null&&e!=this.nil_node&&e.update_max(),t=e.parent,t!=null&&t!=this.nil_node&&t.update_max()}tree_walk(e,t){e!=null&&e!=this.nil_node&&(this.tree_walk(e.left,t),t(e),this.tree_walk(e.right,t))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(t){t.color==pe&&(t.left.color==W&&t.right.color==W||(e=!1))}),e}testBlackHeightProperty(e){let t=0,n=0,i=0;if(e.color==W&&t++,e.left!=this.nil_node?n=this.testBlackHeightProperty(e.left):n=1,e.right!=this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,n!=i)throw new Error("Red-black height property violated");return t+=n,t}}class cc extends Set{constructor(e){super(e),this.index=new tr,this.forEach(t=>this.index.insert(t))}add(e){let t=this.size;return super.add(e),this.size>t&&this.index.insert(e.box,e),this}delete(e){let t=super.delete(e);return t&&this.index.remove(e.box,e),t}clear(){super.clear(),this.index=new tr}search(e){return this.index.search(e)}hit(e){let t=new o.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(t).filter(i=>e.on(i))}svg(){return[...this].reduce((t,n)=>t+n.svg(),"")}}o.PlanarSet=cc;class Hn{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let t=e[0];if(typeof t[0]=="number"&&typeof t[1]=="number"){this.x=t[0],this.y=t[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:t,y:n}=e[0];this.x=t,this.y=n;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw o.Errors.ILLEGAL_PARAMETERS}}get box(){return new o.Box(this.x,this.y,this.x,this.y)}clone(){return new o.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return o.Utils.EQ(this.x,e.x)&&o.Utils.EQ(this.y,e.y)}lessThan(e){return!!(o.Utils.LT(this.y,e.y)||o.Utils.EQ(this.y,e.y)&&o.Utils.LT(this.x,e.x))}rotate(e,t={x:0,y:0}){var n=t.x+(this.x-t.x)*Math.cos(e)-(this.y-t.y)*Math.sin(e),i=t.y+(this.x-t.x)*Math.sin(e)+(this.y-t.y)*Math.cos(e);return new o.Point(n,i)}translate(...e){if(e.length==1&&(e[0]instanceof o.Vector||!isNaN(e[0].x)&&!isNaN(e[0].y)))return new o.Point(this.x+e[0].x,this.y+e[0].y);if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")return new o.Point(this.x+e[0],this.y+e[1]);throw o.Errors.ILLEGAL_PARAMETERS}transform(e){return new o.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let t=new o.Vector(this,e.pt);if(o.Utils.EQ_0(t.cross(e.norm)))return e.pt.clone();let n=t.dot(e.norm),i=e.norm.multiply(n);return this.translate(i)}leftTo(e){let t=new o.Vector(e.pt,this);return o.Utils.GT(t.dot(e.norm),0)}distanceTo(e){if(e instanceof Hn){let t=e.x-this.x,n=e.y-this.y;return[Math.sqrt(t*t+n*n),new o.Segment(this,e)]}if(e instanceof o.Line)return o.Distance.point2line(this,e);if(e instanceof o.Circle)return o.Distance.point2circle(this,e);if(e instanceof o.Segment)return o.Distance.point2segment(this,e);if(e instanceof o.Arc)return o.Distance.point2arc(this,e);if(e instanceof o.Polygon)return o.Distance.point2polygon(this,e);if(e instanceof o.PlanarSet)return o.Distance.shape2planarSet(this,e)}on(e){if(e instanceof o.Point)return this.equalTo(e);if(e instanceof o.Line)return e.contains(this);if(e instanceof o.Circle)return e.contains(this);if(e instanceof o.Segment)return e.contains(this);if(e instanceof o.Arc)return e.contains(this);if(e instanceof o.Polygon)return e.contains(this)}toJSON(){return Object.assign({},this,{name:"point"})}svg(e={}){let{r:t,stroke:n,strokeWidth:i,fill:s,id:a,className:l}=e,f=a&&a.length>0?`id="${a}"`:"",u=l&&l.length>0?`class="${l}"`:"";return`
<circle cx="${this.x}" cy="${this.y}" r="${t||3}" stroke="${n||"black"}" stroke-width="${i||1}" fill="${s||"red"}" ${f} ${u} />`}}o.Point=Hn;const hc=(...r)=>new o.Point(...r);o.point=hc;class dc{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let t=e[0];if(typeof t[0]=="number"&&typeof t[1]=="number"){this.x=t[0],this.y=t[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:t,y:n}=e[0];this.x=t,this.y=n;return}if(e.length===2){let t=e[0],n=e[1];if(typeof t=="number"&&typeof n=="number"){this.x=t,this.y=n;return}if(t instanceof o.Point&&n instanceof o.Point){this.x=n.x-t.x,this.y=n.y-t.y;return}}throw o.Errors.ILLEGAL_PARAMETERS}}clone(){return new o.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return o.Utils.EQ(this.x,e.x)&&o.Utils.EQ(this.y,e.y)}multiply(e){return new o.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!o.Utils.EQ_0(this.length))return new o.Vector(this.x/this.length,this.y/this.length);throw o.Errors.ZERO_DIVISION}rotate(e){let n=new o.Point(this.x,this.y).rotate(e);return new o.Vector(n.x,n.y)}rotate90CCW(){return new o.Vector(-this.y,this.x)}rotate90CW(){return new o.Vector(this.y,-this.x)}invert(){return new o.Vector(-this.x,-this.y)}add(e){return new o.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new o.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let t=this.normalize(),n=e.normalize(),i=Math.atan2(t.cross(n),t.dot(n));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let t=e.normalize(),n=this.dot(t);return t.multiply(n)}toJSON(){return Object.assign({},this,{name:"vector"})}}o.Vector=dc;const pc=(...r)=>new o.Vector(...r);o.vector=pc;class rr{constructor(...e){if(this.ps=new o.Point,this.pe=new o.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let t=e[0];this.ps=new o.Point(t[0],t[1]),this.pe=new o.Point(t[2],t[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:t,pe:n}=e[0];this.ps=new o.Point(t.x,t.y),this.pe=new o.Point(n.x,n.y);return}if(e.length===1&&e[0]instanceof o.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof o.Point&&e[1]instanceof o.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new o.Point(e[0],e[1]),this.pe=new o.Point(e[2],e[3]);return}throw o.Errors.ILLEGAL_PARAMETERS}}clone(){return new o.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new o.Vector(this.start,this.end).slope}get box(){return new o.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return o.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof o.Point)return this.contains(e)?[e]:[];if(e instanceof o.Line)return Fr(this,e);if(e instanceof o.Segment)return Zt(this,e);if(e instanceof o.Circle)return Br(this,e);if(e instanceof o.Box)return Gf(this,e);if(e instanceof o.Arc)return lt(this,e);if(e instanceof o.Polygon)return Kn(this,e)}distanceTo(e){if(e instanceof o.Point){let[t,n]=o.Distance.point2segment(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Circle){let[t,n]=o.Distance.segment2circle(this,e);return[t,n]}if(e instanceof o.Line){let[t,n]=o.Distance.segment2line(this,e);return[t,n]}if(e instanceof o.Segment){let[t,n]=o.Distance.segment2segment(this,e);return[t,n]}if(e instanceof o.Arc){let[t,n]=o.Distance.segment2arc(this,e);return[t,n]}if(e instanceof o.Polygon){let[t,n]=o.Distance.shape2polygon(this,e);return[t,n]}if(e instanceof o.PlanarSet){let[t,n]=o.Distance.shape2planarSet(this,e);return[t,n]}}tangentInStart(){return new o.Vector(this.start,this.end).normalize()}tangentInEnd(){return new o.Vector(this.end,this.start).normalize()}reverse(){return new rr(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new o.Segment(this.start,e),new o.Segment(e,this.end)]}middle(){return new o.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let t=e/this.length;return new o.Point((this.end.x-this.start.x)*t+this.start.x,(this.end.y-this.start.y)*t+this.start.y)}distanceToPoint(e){let[t,...n]=o.Distance.point2segment(e,this);return t}definiteIntegral(e=0){let t=this.end.x-this.start.x,n=this.start.y-e,i=this.end.y-e;return t*(n+i)/2}translate(...e){return new rr(this.ps.translate(...e),this.pe.translate(...e))}rotate(e=0,t=new o.Point){let n=new o.Matrix;return n=n.translate(t.x,t.y).rotate(e).translate(-t.x,-t.y),this.transform(n)}transform(e=new o.Matrix){return new rr(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new o.Line(this.start,this.end).sortPoints(e)}toJSON(){return Object.assign({},this,{name:"segment"})}svg(e={}){let{stroke:t,strokeWidth:n,id:i,className:s}=e,a=i&&i.length>0?`id="${i}"`:"",l=s&&s.length>0?`class="${s}"`:"";return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" stroke="${t||"black"}" stroke-width="${n||1}" ${a} ${l} />`}}o.Segment=rr;const vc=(...r)=>new o.Segment(...r);o.segment=vc;let{vector:Dr}=o;class Xn{constructor(...e){if(this.pt=new o.Point,this.norm=new o.Vector(0,1),e.length!=0){if(e.length==1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:t,norm:n}=e[0];this.pt=new o.Point(t),this.norm=new o.Vector(n);return}if(e.length==2){let t=e[0],n=e[1];if(t instanceof o.Point&&n instanceof o.Point){this.pt=t,this.norm=Xn.points2norm(t,n),this.norm.dot(Dr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(t instanceof o.Point&&n instanceof o.Vector){if(o.Utils.EQ_0(n.x)&&o.Utils.EQ_0(n.y))throw o.Errors.ILLEGAL_PARAMETERS;this.pt=t.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(Dr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(t instanceof o.Vector&&n instanceof o.Point){if(o.Utils.EQ_0(t.x)&&o.Utils.EQ_0(t.y))throw o.Errors.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=t.clone(),this.norm=this.norm.normalize(),this.norm.dot(Dr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw o.Errors.ILLEGAL_PARAMETERS}}clone(){return new o.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new o.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new o.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,t=this.norm.y,n=this.norm.dot(this.pt);return[e,t,n]}parallelTo(e){return o.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let t=new o.Vector(this.pt,e);return o.Utils.EQ_0(this.norm.dot(t))}coord(e){return Dr(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof o.Point)return this.contains(e)?[e]:[];if(e instanceof o.Line)return kr(this,e);if(e instanceof o.Circle)return $t(this,e);if(e instanceof o.Box)return Jt(this,e);if(e instanceof o.Segment)return Fr(e,this);if(e instanceof o.Arc)return Wn(this,e);if(e instanceof o.Polygon)return jr(this,e)}distanceTo(e){if(e instanceof o.Point){let[t,n]=o.Distance.point2line(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Circle){let[t,n]=o.Distance.circle2line(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Segment){let[t,n]=o.Distance.segment2line(e,this);return[t,n.reverse()]}if(e instanceof o.Arc){let[t,n]=o.Distance.arc2line(e,this);return[t,n.reverse()]}if(e instanceof o.Polygon){let[t,n]=o.Distance.shape2polygon(this,e);return[t,n]}}split(e){if(e instanceof o.Point)return[new o.Ray(e,this.norm.invert()),new o.Ray(e,this.norm)];{let t=new o.Multiline([this]),n=this.sortPoints(e);return t.split(n),t.toShapes()}}sortPoints(e){return e.slice().sort((t,n)=>this.coord(t)<this.coord(n)?-1:this.coord(t)>this.coord(n)?1:0)}toJSON(){return Object.assign({},this,{name:"line"})}svg(e,t={}){let n=Jt(this,e);if(n.length===0)return"";let i=n[0],s=n.length==2?n[1]:n.find(l=>!l.equalTo(i));return s===void 0&&(s=i),new o.Segment(i,s).svg(t)}static points2norm(e,t){if(e.equalTo(t))throw o.Errors.ILLEGAL_PARAMETERS;return new o.Vector(e,t).normalize().rotate90CCW()}}o.Line=Xn;const gc=(...r)=>new o.Line(...r);o.line=gc;class yc{constructor(...e){if(this.pc=new o.Point,this.r=1,e.length==1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:t,r:n}=e[0];this.pc=new o.Point(t),this.r=n;return}else{let[t,n]=[...e];t&&t instanceof o.Point&&(this.pc=t.clone()),n!==void 0&&(this.r=n);return}}clone(){return new o.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new o.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof o.Point)return o.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof o.Segment)return o.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&o.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof o.Arc)return this.intersect(e).length===0&&o.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&o.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof o.Circle)return this.intersect(e).length===0&&o.Utils.LE(e.r,this.r)&&o.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new o.Arc(this.center,this.r,Math.PI,-Math.PI,e)}intersect(e){if(e instanceof o.Point)return this.contains(e)?[e]:[];if(e instanceof o.Line)return $t(e,this);if(e instanceof o.Segment)return Br(e,this);if(e instanceof o.Circle)return bs(e,this);if(e instanceof o.Box)return qf(this,e);if(e instanceof o.Arc)return Yn(e,this);if(e instanceof o.Polygon)return xs(this,e)}distanceTo(e){if(e instanceof o.Point){let[t,n]=o.Distance.point2circle(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Circle){let[t,n]=o.Distance.circle2circle(this,e);return[t,n]}if(e instanceof o.Line){let[t,n]=o.Distance.circle2line(this,e);return[t,n]}if(e instanceof o.Segment){let[t,n]=o.Distance.segment2circle(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Arc){let[t,n]=o.Distance.arc2circle(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Polygon){let[t,n]=o.Distance.shape2polygon(this,e);return[t,n]}if(e instanceof o.PlanarSet){let[t,n]=o.Distance.shape2planarSet(this,e);return[t,n]}}toJSON(){return Object.assign({},this,{name:"circle"})}svg(e={}){let{stroke:t,strokeWidth:n,fill:i,fillOpacity:s,id:a,className:l}=e,f=a&&a.length>0?`id="${a}"`:"",u=l&&l.length>0?`class="${l}"`:"";return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}" stroke="${t||"black"}" stroke-width="${n||1}" fill="${i||"none"}" fill-opacity="${s||1}" ${f} ${u} />`}}o.Circle=yc;const mc=(...r)=>new o.Circle(...r);o.circle=mc;class _c{constructor(...e){if(this.pc=new o.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=o.CCW,e.length!=0)if(e.length==1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:t,r:n,startAngle:i,endAngle:s,counterClockwise:a}=e[0];this.pc=new o.Point(t.x,t.y),this.r=n,this.startAngle=i,this.endAngle=s,this.counterClockwise=a;return}else{let[t,n,i,s,a]=[...e];t&&t instanceof o.Point&&(this.pc=t.clone()),n!==void 0&&(this.r=n),i!==void 0&&(this.startAngle=i),s!==void 0&&(this.endAngle=s),a!==void 0&&(this.counterClockwise=a);return}}clone(){return new o.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(o.Utils.EQ(this.startAngle,this.endAngle))return 0;if(o.Utils.EQ(Math.abs(this.startAngle-this.endAngle),o.PIx2))return o.PIx2;let e;return this.counterClockwise?e=o.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+o.PIx2:e=o.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+o.PIx2,o.Utils.GT(e,o.PIx2)&&(e-=o.PIx2),o.Utils.LT(e,0)&&(e+=o.PIx2),e}get start(){return new o.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new o.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let t=this.breakToFunctional().reduce((n,i)=>n.merge(i.start.box),new o.Box);return t=t.merge(this.end.box),t}contains(e){if(!o.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let t=new o.Vector(this.pc,e).slope,n=new o.Arc(this.pc,this.r,this.startAngle,t,this.counterClockwise);return o.Utils.LE(n.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let t=new o.Vector(this.pc,e).slope;return[new o.Arc(this.pc,this.r,this.startAngle,t,this.counterClockwise),new o.Arc(this.pc,this.r,t,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new o.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let t=e/this.length,n=this.counterClockwise?this.startAngle+this.sweep*t:this.startAngle-this.sweep*t;return new o.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof o.Point)return this.contains(e)?[e]:[];if(e instanceof o.Line)return Wn(e,this);if(e instanceof o.Circle)return Yn(this,e);if(e instanceof o.Segment)return lt(e,this);if(e instanceof o.Box)return Wf(this,e);if(e instanceof o.Arc)return zn(this,e);if(e instanceof o.Polygon)return Qn(this,e)}distanceTo(e){if(e instanceof o.Point){let[t,n]=o.Distance.point2arc(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Circle){let[t,n]=o.Distance.arc2circle(this,e);return[t,n]}if(e instanceof o.Line){let[t,n]=o.Distance.arc2line(this,e);return[t,n]}if(e instanceof o.Segment){let[t,n]=o.Distance.segment2arc(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Arc){let[t,n]=o.Distance.arc2arc(this,e);return[t,n]}if(e instanceof o.Polygon){let[t,n]=o.Distance.shape2polygon(this,e);return[t,n]}if(e instanceof o.PlanarSet){let[t,n]=o.Distance.shape2planarSet(this,e);return[t,n]}}breakToFunctional(){let e=[],t=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],n=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let s=0;s<4;s++)n[s].on(this)&&i.push(new o.Arc(this.pc,this.r,this.startAngle,t[s],this.counterClockwise));if(i.length==0)e.push(this.clone());else{i.sort((l,f)=>l.length-f.length);for(let l=0;l<i.length;l++){let f=e.length>0?e[e.length-1]:void 0,u;f?u=new o.Arc(this.pc,this.r,f.endAngle,i[l].endAngle,this.counterClockwise):u=new o.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),o.Utils.EQ_0(u.length)||e.push(u.clone())}let s=e.length>0?e[e.length-1]:void 0,a;s?a=new o.Arc(this.pc,this.r,s.endAngle,this.endAngle,this.counterClockwise):a=new o.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!o.Utils.EQ_0(a.length)&&!o.Utils.EQ(a.sweep,2*Math.PI)&&e.push(a.clone())}return e}tangentInStart(){let e=new o.Vector(this.pc,this.start),t=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(t).normalize()}tangentInEnd(){let e=new o.Vector(this.pc,this.end),t=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(t).normalize()}reverse(){return new o.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}translate(...e){let t=this.clone();return t.pc=this.pc.translate(...e),t}rotate(e=0,t=new o.Point){let n=new o.Matrix;return n=n.translate(t.x,t.y).rotate(e).translate(-t.x,-t.y),this.transform(n)}scale(e=1,t=1){let n=new o.Matrix;return n=n.scale(e,t),this.transform(n)}transform(e=new o.Matrix){let t=this.start.transform(e),n=this.end.transform(e),i=this.pc.transform(e),s=this.counterClockwise;return e.a*e.d<0&&(s=!s),o.Arc.arcSE(i,t,n,s)}static arcSE(e,t,n,i){let{vector:s}=o,a=s(e,t).slope,l=s(e,n).slope;o.Utils.EQ(a,l)&&(l+=2*Math.PI,i=!0);let f=s(e,t).length;return new o.Arc(e,f,a,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,s)=>i+s.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let t=new o.Line(this.start,this.end),n=this.pc.leftTo(t),s=new o.Segment(this.start,this.end).definiteIntegral(e),a=this.circularSegmentArea();return n?s-a:s+a}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:t}=o;return e.slice().sort((n,i)=>{let s=t(this.pc,n).slope,a=t(this.pc,i).slope;return s<a?-1:s>a?1:0})}toJSON(){return Object.assign({},this,{name:"arc"})}svg(e={}){let t=this.sweep<=Math.PI?"0":"1",n=this.counterClockwise?"1":"0",{stroke:i,strokeWidth:s,fill:a,id:l,className:f}=e,u=l&&l.length>0?`id="${l}"`:"",c=f&&f.length>0?`class="${f}"`:"";return o.Utils.EQ(this.sweep,2*Math.PI)?new o.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${t},${n} ${this.end.x},${this.end.y}"
                    stroke="${i||"black"}" stroke-width="${s||1}" fill="${a||"none"}" ${u} ${c} />`}}o.Arc=_c;const bc=(...r)=>new o.Arc(...r);o.arc=bc;class Vr{constructor(e=void 0,t=void 0,n=void 0,i=void 0){this.xmin=e,this.ymin=t,this.xmax=n,this.ymax=i}clone(){return new Vr(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new o.Point(this.xmin,this.ymin)}get high(){return new o.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new o.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Vr(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,t){return e.merge(t)}static comparable_less_than(e,t){return e.lessThan(t)}set(e,t,n,i){this.xmin=e,this.ymin=t,this.xmax=n,this.ymax=i}toPoints(){return[new o.Point(this.xmin,this.ymin),new o.Point(this.xmax,this.ymin),new o.Point(this.xmax,this.ymax),new o.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new o.Segment(e[0],e[1]),new o.Segment(e[1],e[2]),new o.Segment(e[2],e[3]),new o.Segment(e[3],e[0])]}svg(e={}){let{stroke:t,strokeWidth:n,fill:i,id:s,className:a}=e,l=s&&s.length>0?`id="${s}"`:"",f=a&&a.length>0?`class="${a}"`:"",u=this.xmax-this.xmin,c=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width=${u} height=${c} stroke="${t||"black"}" stroke-width="${n||1}" fill="${i||"none"}" ${l} ${f} />`}}o.Box=Vr;const wc=(...r)=>new o.Box(...r);o.box=wc;class xc{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}isSegment(){return this.shape instanceof o.Segment}isArc(){return this.shape instanceof o.Arc}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof o.Line||this.shape instanceof o.Ray)return this.bv=o.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=er(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=er(e,this.end)),this.bvStart===o.OUTSIDE||this.bvEnd==o.OUTSIDE)this.bv=o.OUTSIDE;else if(this.bvStart===o.INSIDE||this.bvEnd==o.INSIDE)this.bv=o.INSIDE;else{let t=er(e,this.middle());this.bv=t}return this.bv}setOverlap(e){let t,n=this.shape,i=e.shape;n instanceof o.Segment&&i instanceof o.Segment?n.start.equalTo(i.start)&&n.end.equalTo(i.end)?t=o.OVERLAP_SAME:n.start.equalTo(i.end)&&n.end.equalTo(i.start)&&(t=o.OVERLAP_OPPOSITE):(n instanceof o.Arc&&i instanceof o.Arc||n instanceof o.Segment&&i instanceof o.Arc||n instanceof o.Arc&&i instanceof o.Segment)&&(n.start.equalTo(i.start)&&n.end.equalTo(i.end)&&n.middle().equalTo(i.middle())?t=o.OVERLAP_SAME:n.start.equalTo(i.end)&&n.end.equalTo(i.start)&&n.middle().equalTo(i.middle())&&(t=o.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=t),e.overlap===void 0&&(e.overlap=t)}svg(){if(this.shape instanceof o.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof o.Arc){let e=this.shape,t,n=e.counterClockwise?"1":"0";if(o.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,s=new o.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),a=new o.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return t="0",` A${s.r},${s.r} 0 ${t},${n} ${s.end.x},${s.end.y}
                    A${a.r},${a.r} 0 ${t},${n} ${a.end.x},${a.end.y}`}else return t=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${t},${n} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}o.Edge=xc;class Sc extends Mn{constructor(e,t){super(e,t),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let t=e||this.first,n=this.first?e?e===this.first:!1:!0;return e=t?t.next:void 0,{value:t,done:n}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,t){return super.insert(e,t),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class Pt extends Sc{constructor(e,...t){if(super(),this._box=void 0,this._orientation=void 0,t.length!=0){if(t.length==1){if(t[0]instanceof Array){let n=t[0];if(n.length==0)return;if(n.every(i=>i instanceof o.Point)){let i=Pt.points2segments(n);this.shapes2face(e.edges,i)}else if(n.every(i=>i instanceof Array&&i.length===2)){let i=n.map(a=>new o.Point(a[0],a[1])),s=Pt.points2segments(i);this.shapes2face(e.edges,s)}else if(n.every(i=>i instanceof o.Segment||i instanceof o.Arc))this.shapes2face(e.edges,n);else if(n.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let s of n){let a;s.name==="segment"?a=new o.Segment(s):a=new o.Arc(s),i.push(a)}this.shapes2face(e.edges,i)}}else if(t[0]instanceof Pt){let n=t[0];this.first=n.first,this.last=n.last;for(let i of n)e.edges.add(i)}else if(t[0]instanceof o.Circle)this.shapes2face(e.edges,[t[0].toArc(o.CCW)]);else if(t[0]instanceof o.Box){let n=t[0];this.shapes2face(e.edges,[new o.Segment(new o.Point(n.xmin,n.ymin),new o.Point(n.xmax,n.ymin)),new o.Segment(new o.Point(n.xmax,n.ymin),new o.Point(n.xmax,n.ymax)),new o.Segment(new o.Point(n.xmax,n.ymax),new o.Point(n.xmin,n.ymax)),new o.Segment(new o.Point(n.xmin,n.ymax),new o.Point(n.xmin,n.ymin))])}}t.length==2&&t[0]instanceof o.Edge&&t[1]instanceof o.Edge&&(this.first=t[0],this.last=t[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new o.Box;for(let t of this)e=e.merge(t.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let t=null;for(let n of this)if(e>=n.arc_length&&(n===this.last||e<n.next.arc_length)){t=n.pointAtLength(e-n.arc_length);break}return t}static points2segments(e){let t=[];for(let n=0;n<e.length;n++)e[n].equalTo(e[(n+1)%e.length])||t.push(new o.Segment(e[n],e[(n+1)%e.length]));return t}shapes2face(e,t){for(let n of t){let i=new o.Edge(n);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,t){return super.insert(e,t),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}reverse(){let e=[],t=this.last;do t.shape=t.shape.reverse(),e.push(t),t=t.prev;while(t!==this.last);this.first=void 0,this.last=void 0;for(let n of e)this.first===void 0?(n.prev=n,n.next=n,this.first=n,this.last=n):(n.prev=this.last,this.last.next=n,this.last=n,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(n);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,t=this.box.ymin;for(let n of this)e+=n.shape.definiteIntegral(t);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();o.Utils.EQ_0(e)?this._orientation=o.ORIENTATION.NOT_ORIENTABLE:o.Utils.LT(e,0)?this._orientation=o.ORIENTATION.CCW:this._orientation=o.ORIENTATION.CW}return this._orientation}isSimple(e){return Pt.getSelfIntersections(this,e,!0).length==0}static getSelfIntersections(e,t,n=!1){let i=[];for(let s of e){let a=t.search(s.box);for(let l of a){if(s===l||l.face!==e||s.shape instanceof o.Segment&&l.shape instanceof o.Segment&&(s.next===l||s.prev===l))continue;let f=s.shape.intersect(l.shape);for(let u of f)if(!(u.equalTo(s.start)&&u.equalTo(l.end)&&l===s.prev)&&!(u.equalTo(s.end)&&u.equalTo(l.start)&&l===s.next)&&(i.push(u),n))break;if(i.length>0&&n)break}if(i.length>0&&n)break}return i}findEdgeByPoint(e){let t;for(let n of this)if(n.shape.contains(e)){t=n;break}return t}toPolygon(){return new o.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`
M${this.first.start.x},${this.first.start.y}`;for(let t of this)e+=t.svg();return e+=" z",e}}o.Face=Pt;class Jn{constructor(...e){if(this.pt=new o.Point,this.norm=new o.Vector(0,1),e.length!=0&&(e.length>=1&&e[0]instanceof o.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof o.Vector){this.norm=e[1].clone();return}throw o.Errors.ILLEGAL_PARAMETERS}}clone(){return new Jn(this.pt,this.norm)}get slope(){return new o.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new o.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e==0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let t=new o.Vector(this.pt,e);return o.Utils.EQ_0(this.norm.dot(t))&&o.Utils.GE(t.cross(this.norm),0)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new o.Segment(this.pt,e),new o.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof o.Segment)return this.intersectRay2Segment(this,e);if(e instanceof o.Arc)return this.intersectRay2Arc(this,e)}intersectRay2Segment(e,t){let n=[],i=new o.Line(e.start,e.norm),s=i.intersect(t);for(let a of s)e.contains(a)&&n.push(a);return s.length==2&&n.length==1&&e.start.on(i)&&n.push(e.start),n}intersectRay2Arc(e,t){let n=[],s=new o.Line(e.start,e.norm).intersect(t);for(let a of s)e.contains(a)&&n.push(a);return n}svg(e,t={}){let n=new o.Line(this.pt,this.norm),i=Jt(n,e);return i=i.filter(a=>this.contains(a)),i.length===0||i.length===2?"":new o.Segment(this.pt,i[0]).svg(t)}}o.Ray=Jn;const Ec=(...r)=>new o.Ray(...r);o.ray=Ec;class Tt{constructor(){this.faces=new o.PlanarSet,this.edges=new o.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof o.Circle||e[0]instanceof o.Box)){let t=e[0];if(e[0]instanceof Array&&e[0].every(n=>n instanceof Array))if(t.every(n=>n instanceof Array&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"))this.faces.add(new o.Face(this,t));else for(let n of t)if(n instanceof Array&&n[0]instanceof Array&&n[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of n)this.faces.add(new o.Face(this,i));else this.faces.add(new o.Face(this,n));else this.faces.add(new o.Face(this,t))}}get box(){return[...this.faces].reduce((e,t)=>e.merge(t.box),new o.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new Tt;for(let t of this.faces)e.addFace(t.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let t of this.faces)if(!t.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((t,n)=>t+n.signedArea(),0);return Math.abs(e)}addFace(...e){let t=new o.Face(this,...e);return this.faces.add(t),t}deleteFace(e){for(let t of e)this.edges.delete(t);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let n of this.edges)n.face=null;let e,t=!0;for(;t;){t=!1;for(let n of this.edges)if(n.face===null){e=n,t=!0;break}if(t){let n=e;do n=n.next;while(n.next!==e);this.addFace(e,n)}}}removeChain(e,t,n){if(n.next===t){this.deleteFace(e);return}for(let i=t;i!==n.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,t){let n=t.shape.split(e);if(n[0]===null)return t.prev;if(n[1]===null)return t;let i=new o.Edge(n[0]),s=t.prev;return t.face.insert(i,s),this.edges.delete(t),this.edges.add(i),t.shape=n[1],this.edges.add(t),i}cut(e){let t=[this.clone()];for(let n of e){if(n.setInclusion(this)!==Yt)continue;let i=n.shape.start,s=n.shape.end,a=[];for(let l of t)if(l.findEdgeByPoint(i)===void 0)a.push(l);else{let[f,u]=l.cutFace(i,s);a.push(f,u)}t=a}return t}cutFace(e,t){let n=this.findEdgeByPoint(e),i=this.findEdgeByPoint(t);if(n.face!==i.face)return[];let s=this.addVertex(e,n);i=this.findEdgeByPoint(t);let a=this.addVertex(t,i),l=s.face,f=new o.Edge(new o.Segment(s.end,a.end)),u=new o.Edge(new o.Segment(a.end,s.end));s.next.prev=u,u.next=s.next,s.next=f,f.prev=s,a.next.prev=f,f.next=a.next,a.next=u,u.prev=a,this.edges.add(f),this.edges.add(u);let c=this.addFace(f,s),d=this.addFace(u,a);return this.faces.delete(l),[c.toPolygon(),d.toPolygon()]}cutWithLine(e){let t=this.clone(),n=new ke([e]),i={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let l of t.edges){let f=ws(l,e);for(let u of f)wt(n.first,u,i.int_points1),wt(l,u,i.int_points2)}if(i.int_points1.length===0)return t;i.int_points1_sorted=kn(e,i.int_points1),i.int_points2_sorted=Qt(i.int_points2),St(n,i.int_points1_sorted),St(t,i.int_points2_sorted),Fn(i),i.int_points1_sorted=kn(e,i.int_points1),i.int_points2_sorted=Qt(i.int_points2),Bn(i.int_points1),jn(i.int_points1,t);for(let l of i.int_points1_sorted)l.edge_before.bv===l.edge_after.bv&&(i.int_points2[l.id]=-1,l.id=-1);if(i.int_points1=i.int_points1.filter(l=>l.id>=0),i.int_points2=i.int_points2.filter(l=>l.id>=0),i.int_points1.length===0)return t;i.int_points1_sorted=kn(e,i.int_points1),i.int_points2_sorted=Qt(i.int_points2);let s=i.int_points1[0],a;for(let l of i.int_points1_sorted)l.edge_before.bv===Yt&&(a=new o.Edge(new o.Segment(s.pt,l.pt)),fs(i.int_points2[s.id],i.int_points2[l.id],a),t.edges.add(a),a=new o.Edge(new o.Segment(l.pt,s.pt)),fs(i.int_points2[l.id],i.int_points2[s.id],a),t.edges.add(a)),s=l;return t.recreateFaces(),t}findEdgeByPoint(e){let t;for(let n of this.faces)if(t=n.findEdgeByPoint(e),t!==void 0)break;return t}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,s)=>s.area()-i.area());let t=[...e[0].faces][0].orientation(),n=e.filter(i=>[...i.faces][0].orientation()===t);for(let i of e){let s=[...i.faces][0];if(s.orientation()!==t){for(let a of n)if(s.shapes.every(l=>a.contains(l))){a.addFace(s.shapes);break}}}return n}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof o.Point){let t=er(this,e);return t===Yt||t===je}else return Is(this,e)}distanceTo(e){if(e instanceof o.Point){let[t,n]=o.Distance.point2polygon(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Circle||e instanceof o.Line||e instanceof o.Segment||e instanceof o.Arc){let[t,n]=o.Distance.shape2polygon(e,this);return n=n.reverse(),[t,n]}if(e instanceof o.Polygon){let t=[Number.POSITIVE_INFINITY,new o.Segment],n,i;for(let s of this.edges){let a=t[0];[n,i]=o.Distance.shape2planarSet(s.shape,e.edges,a),o.Utils.LT(n,a)&&(t=[n,i])}return t}}intersect(e){if(e instanceof o.Point)return this.contains(e)?[e]:[];if(e instanceof o.Line)return jr(e,this);if(e instanceof o.Circle)return xs(e,this);if(e instanceof o.Segment)return Kn(e,this);if(e instanceof o.Arc)return Qn(e,this);if(e instanceof o.Polygon)return Xf(e,this)}translate(e){let t=new Tt;for(let n of this.faces)t.addFace(n.shapes.map(i=>i.translate(e)));return t}rotate(e=0,t=new o.Point){let n=new Tt;for(let i of this.faces)n.addFace(i.shapes.map(s=>s.rotate(e,t)));return n}transform(e=new o.Matrix){let t=new Tt;for(let n of this.faces)t.addFace(n.shapes.map(i=>i.transform(e)));return t}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}svg(e={}){let{stroke:t,strokeWidth:n,fill:i,fillRule:s,fillOpacity:a,id:l,className:f}=e,u=l&&l.length>0?`id="${l}"`:"",c=f&&f.length>0?`class="${f}"`:"",d=`
<path stroke="${t||"black"}" stroke-width="${n||1}" fill="${i||"lightcyan"}" fill-rule="${s||"evenodd"}" fill-opacity="${a||1}" ${u} ${c} d="`;for(let g of this.faces)d+=g.svg();return d+=`" >
</path>`,d}}o.Polygon=Tt;const $c=(...r)=>new o.Polygon(...r);o.polygon=$c;const{Circle:Zn,Line:Ts,Point:As,Vector:Gr,Utils:ei}=o;class nr{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,t){const n=new Gr(e.pc,t),i=e.r*e.r,s=n.dot(n);return ei.EQ_0(s)?new As(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(n.multiply(i/s))}static inverseCircle(e,t){const n=e.pc.distanceTo(t.pc)[0];if(ei.EQ(n,t.r)){let i=e.r*e.r/(2*t.r),s=new Gr(e.pc,t.pc);s=s.normalize();let a=e.pc.translate(s.multiply(i));return new Ts(a,s)}else{let i=new Gr(e.pc,t.pc),s=e.r*e.r/(i.dot(i)-t.r*t.r),a=e.pc.translate(i.multiply(s)),l=Math.abs(s)*t.r;return new Zn(a,l)}}static inverseLine(e,t){const[n,i]=e.pc.distanceTo(t);if(ei.EQ_0(n))return t.clone();{let s=e.r*e.r/(2*n),a=new Gr(e.pc,i.end);return a=a.multiply(s/n),new Zn(e.pc.translate(a),s)}}inverse(e){if(e instanceof As)return nr.inversePoint(this.circle,e);if(e instanceof Zn)return nr.inverseCircle(this.circle,e);if(e instanceof Ts)return nr.inverseLine(this.circle,e)}}o.Inversion=nr;const Oc=r=>new o.Inversion(r);o.inversion=Oc;class P{static point2point(e,t){return e.distanceTo(t)}static point2line(e,t){let n=e.projectionOn(t);return[new o.Vector(e,n).length,new o.Segment(e,n)]}static point2circle(e,t){let[n,i]=e.distanceTo(t.center);if(o.Utils.EQ_0(n))return[t.r,new o.Segment(e,t.toArc().start)];{let s=Math.abs(n-t.r),a=new o.Vector(t.pc,e).normalize().multiply(t.r),l=t.pc.translate(a);return[s,new o.Segment(e,l)]}}static point2segment(e,t){if(t.start.equalTo(t.end))return P.point2point(e,t.start);let n=new o.Vector(t.start,t.end),i=new o.Vector(t.start,e),s=new o.Vector(t.end,e),a=n.dot(i),l=-n.dot(s),f,u;if(o.Utils.GE(a,0)&&o.Utils.GE(l,0)){let c=t.tangentInStart();return f=Math.abs(c.cross(i)),u=t.start.translate(c.multiply(c.dot(i))),[f,new o.Segment(e,u)]}else return a<0?e.distanceTo(t.start):e.distanceTo(t.end)}static point2arc(e,t){let n=new o.Circle(t.pc,t.r),i=[],s,a;return[s,a]=P.point2circle(e,n),a.end.on(t)&&i.push(P.point2circle(e,n)),i.push(P.point2point(e,t.start)),i.push(P.point2point(e,t.end)),P.sort(i),i[0]}static segment2line(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=[];return i.push(P.point2line(e.start,t)),i.push(P.point2line(e.end,t)),P.sort(i),i[0]}static segment2segment(e,t){let n=Zt(e,t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=[],s,a;return[s,a]=P.point2segment(t.start,e),i.push([s,a.reverse()]),[s,a]=P.point2segment(t.end,e),i.push([s,a.reverse()]),i.push(P.point2segment(e.start,t)),i.push(P.point2segment(e.end,t)),P.sort(i),i[0]}static segment2circle(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=new o.Line(e.ps,e.pe),[s,a]=P.point2line(t.center,i);if(o.Utils.GE(s,t.r)&&a.end.on(e))return P.point2circle(a.end,t);{let[l,f]=P.point2circle(e.start,t),[u,c]=P.point2circle(e.end,t);return o.Utils.LT(l,u)?[l,f]:[u,c]}}static segment2arc(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=new o.Line(e.ps,e.pe),s=new o.Circle(t.pc,t.r),[a,l]=P.point2line(s.center,i);if(o.Utils.GE(a,s.r)&&l.end.on(e)){let[d,g]=P.point2circle(l.end,s);if(g.end.on(t))return[d,g]}let f=[];f.push(P.point2arc(e.start,t)),f.push(P.point2arc(e.end,t));let u,c;return[u,c]=P.point2segment(t.start,e),f.push([u,c.reverse()]),[u,c]=P.point2segment(t.end,e),f.push([u,c.reverse()]),P.sort(f),f[0]}static circle2circle(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];if(e.center.equalTo(t.center)){let i=e.toArc(),s=t.toArc();return P.point2point(i.start,s.start)}else{let i=new o.Line(e.center,t.center),s=i.intersect(e),a=i.intersect(t),l=[];return l.push(P.point2point(s[0],a[0])),l.push(P.point2point(s[0],a[1])),l.push(P.point2point(s[1],a[0])),l.push(P.point2point(s[1],a[1])),P.sort(l),l[0]}}static circle2line(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let[i,s]=P.point2line(e.center,t),[a,l]=P.point2circle(s.end,e);return l=l.reverse(),[a,l]}static arc2line(e,t){let n=t.intersect(e);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=new o.Circle(e.center,e.r),[s,a]=P.point2line(i.center,t);if(o.Utils.GE(s,i.r)){let[l,f]=P.point2circle(a.end,i);if(f.end.on(e))return[l,f]}else{let l=[];return l.push(P.point2line(e.start,t)),l.push(P.point2line(e.end,t)),P.sort(l),l[0]}}static arc2circle(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=new o.Circle(e.center,e.r),[s,a]=P.circle2circle(i,t);if(a.start.on(e))return[s,a];{let l=[];return l.push(P.point2circle(e.start,t)),l.push(P.point2circle(e.end,t)),P.sort(l),l[0]}}static arc2arc(e,t){let n=e.intersect(t);if(n.length>0)return[0,new o.Segment(n[0],n[0])];let i=new o.Circle(e.center,e.r),s=new o.Circle(t.center,t.r),[a,l]=P.circle2circle(i,s);if(l.start.on(e)&&l.end.on(t))return[a,l];{let f=[],u,c;return[u,c]=P.point2arc(e.start,t),c.end.on(t)&&f.push([u,c]),[u,c]=P.point2arc(e.end,t),c.end.on(t)&&f.push([u,c]),[u,c]=P.point2arc(t.start,e),c.end.on(e)&&f.push([u,c.reverse()]),[u,c]=P.point2arc(t.end,e),c.end.on(e)&&f.push([u,c.reverse()]),[u,c]=P.point2point(e.start,t.start),f.push([u,c]),[u,c]=P.point2point(e.start,t.end),f.push([u,c]),[u,c]=P.point2point(e.end,t.start),f.push([u,c]),[u,c]=P.point2point(e.end,t.end),f.push([u,c]),P.sort(f),f[0]}}static point2polygon(e,t){let n=[Number.POSITIVE_INFINITY,new o.Segment];for(let i of t.edges){let[s,a]=i.shape instanceof o.Segment?P.point2segment(e,i.shape):P.point2arc(e,i.shape);o.Utils.LT(s,n[0])&&(n=[s,a])}return n}static shape2polygon(e,t){let n=[Number.POSITIVE_INFINITY,new o.Segment];for(let i of t.edges){let[s,a]=e.distanceTo(i.shape);o.Utils.LT(s,n[0])&&(n=[s,a])}return n}static polygon2polygon(e,t){let n=[Number.POSITIVE_INFINITY,new o.Segment];for(let i of e.edges)for(let s of t.edges){let[a,l]=i.shape.distanceTo(s.shape);o.Utils.LT(a,n[0])&&(n=[a,l])}return n}static box2box_minmax(e,t){let n=Math.max(Math.max(e.xmin-t.xmax,0),Math.max(t.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-t.ymax,0),Math.max(t.ymin-e.ymax,0)),s=n*n+i*i,a=e.merge(t),l=a.xmax-a.xmin,f=a.ymax-a.ymin,u=l*l+f*f;return[s,u]}static minmax_tree_process_level(e,t,n,i){let s,a;for(let c of t)[s,a]=P.box2box_minmax(e.box,c.item.key),c.item.value instanceof o.Edge?i.insert([s,a],c.item.value.shape):i.insert([s,a],c.item.value),o.Utils.LT(a,n)&&(n=a);if(t.length===0)return n;let l=t.map(c=>c.left.isNil()?void 0:c.left).filter(c=>c!==void 0),f=t.map(c=>c.right.isNil()?void 0:c.right).filter(c=>c!==void 0),u=[...l,...f].filter(c=>{let[d,g]=P.box2box_minmax(e.box,c.max);return o.Utils.LE(d,n)});return n=P.minmax_tree_process_level(e,u,n,i),n}static minmax_tree(e,t,n){let i=new tr,s=[t.index.root],a=n<Number.POSITIVE_INFINITY?n*n:Number.POSITIVE_INFINITY;return a=P.minmax_tree_process_level(e,s,a,i),i}static minmax_tree_calc_distance(e,t,n){let i,s;if(t!=null&&!t.isNil()){if([i,s]=P.minmax_tree_calc_distance(e,t.left,n),s)return[i,s];if(o.Utils.LT(i[0],Math.sqrt(t.item.key.low)))return[i,!0];let[a,l]=P.distance(e,t.item.value);return o.Utils.LT(a,i[0])&&(i=[a,l]),[i,s]=P.minmax_tree_calc_distance(e,t.right,i),[i,s]}return[n,!1]}static shape2planarSet(e,t,n=Number.POSITIVE_INFINITY){let i=[n,new o.Segment],s=!1;if(t instanceof o.PlanarSet){let a=P.minmax_tree(e,t,n);[i,s]=P.minmax_tree_calc_distance(e,a.root,i)}return i}static sort(e){e.sort((t,n)=>o.Utils.LT(t[0],n[0])?-1:o.Utils.GT(t[0],n[0])?1:0)}static distance(e,t){return e.distanceTo(t)}}o.Distance=P,o.BooleanOperations=Ff,o.Relations=lc;var Rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ic(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Pc(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var qr=function(r){return r&&r.Math==Math&&r},_e=qr(typeof globalThis=="object"&&globalThis)||qr(typeof window=="object"&&window)||qr(typeof self=="object"&&self)||qr(typeof Rs=="object"&&Rs)||function(){return this}()||Function("return this")(),At={},z=function(r){try{return!!r()}catch{return!0}},Tc=z,$e=!Tc(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Ac=z,ir=!Ac(function(){var r=function(){}.bind();return typeof r!="function"||r.hasOwnProperty("prototype")}),Rc=ir,Wr=Function.prototype.call,Te=Rc?Wr.bind(Wr):function(){return Wr.apply(Wr,arguments)},ti={},Ls={}.propertyIsEnumerable,Cs=Object.getOwnPropertyDescriptor,Lc=Cs&&!Ls.call({1:2},1);ti.f=Lc?function(e){var t=Cs(this,e);return!!t&&t.enumerable}:Ls;var or=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}},Ns=ir,Ms=Function.prototype,Cc=Ms.bind,ri=Ms.call,Nc=Ns&&Cc.bind(ri,ri),K=Ns?function(r){return r&&Nc(r)}:function(r){return r&&function(){return ri.apply(r,arguments)}},ks=K,Mc=ks({}.toString),kc=ks("".slice),Rt=function(r){return kc(Mc(r),8,-1)},Fc=K,Bc=z,jc=Rt,ni=Object,Uc=Fc("".split),ii=Bc(function(){return!ni("z").propertyIsEnumerable(0)})?function(r){return jc(r)=="String"?Uc(r,""):ni(r)}:ni,Dc=TypeError,sr=function(r){if(r==null)throw Dc("Can't call method on "+r);return r},Vc=ii,Gc=sr,qe=function(r){return Vc(Gc(r))},ae=function(r){return typeof r=="function"},qc=ae,Ae=function(r){return typeof r=="object"?r!==null:qc(r)},oi=_e,Wc=ae,zc=function(r){return Wc(r)?r:void 0},We=function(r,e){return arguments.length<2?zc(oi[r]):oi[r]&&oi[r][e]},Yc=K,zr=Yc({}.isPrototypeOf),Kc=We,Qc=Kc("navigator","userAgent")||"",Fs=_e,si=Qc,Bs=Fs.process,js=Fs.Deno,Us=Bs&&Bs.versions||js&&js.version,Ds=Us&&Us.v8,Fe,Yr;Ds&&(Fe=Ds.split("."),Yr=Fe[0]>0&&Fe[0]<4?1:+(Fe[0]+Fe[1])),!Yr&&si&&(Fe=si.match(/Edge\/(\d+)/),(!Fe||Fe[1]>=74)&&(Fe=si.match(/Chrome\/(\d+)/),Fe&&(Yr=+Fe[1])));var ai=Yr,Vs=ai,Hc=z,Lt=!!Object.getOwnPropertySymbols&&!Hc(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&Vs&&Vs<41}),Xc=Lt,Gs=Xc&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Jc=We,Zc=ae,eh=zr,th=Gs,rh=Object,Kr=th?function(r){return typeof r=="symbol"}:function(r){var e=Jc("Symbol");return Zc(e)&&eh(e.prototype,rh(r))},nh=String,li=function(r){try{return nh(r)}catch{return"Object"}},ih=ae,oh=li,sh=TypeError,ui=function(r){if(ih(r))return r;throw sh(oh(r)+" is not a function")},ah=ui,qs=function(r,e){var t=r[e];return t==null?void 0:ah(t)},fi=Te,ci=ae,hi=Ae,lh=TypeError,uh=function(r,e){var t,n;if(e==="string"&&ci(t=r.toString)&&!hi(n=fi(t,r))||ci(t=r.valueOf)&&!hi(n=fi(t,r))||e!=="string"&&ci(t=r.toString)&&!hi(n=fi(t,r)))return n;throw lh("Can't convert object to primitive value")},ft={exports:{}},Ws=_e,fh=Object.defineProperty,di=function(r,e){try{fh(Ws,r,{value:e,configurable:!0,writable:!0})}catch{Ws[r]=e}return e},ch=_e,hh=di,zs="__core-js_shared__",dh=ch[zs]||hh(zs,{}),pi=dh,Ys=pi;(ft.exports=function(r,e){return Ys[r]||(Ys[r]=e!==void 0?e:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"});var ph=sr,vh=Object,Ct=function(r){return vh(ph(r))},gh=K,yh=Ct,mh=gh({}.hasOwnProperty),ve=Object.hasOwn||function(e,t){return mh(yh(e),t)},_h=K,bh=0,wh=Math.random(),xh=_h(1 .toString),vi=function(r){return"Symbol("+(r===void 0?"":r)+")_"+xh(++bh+wh,36)},Sh=_e,Eh=ft.exports,Ks=ve,$h=vi,Qs=Lt,Hs=Gs,Nt=Eh("wks"),ct=Sh.Symbol,Xs=ct&&ct.for,Oh=Hs?ct:ct&&ct.withoutSetter||$h,ge=function(r){if(!Ks(Nt,r)||!(Qs||typeof Nt[r]=="string")){var e="Symbol."+r;Qs&&Ks(ct,r)?Nt[r]=ct[r]:Hs&&Xs?Nt[r]=Xs(e):Nt[r]=Oh(e)}return Nt[r]},Ih=Te,Js=Ae,Zs=Kr,Ph=qs,Th=uh,Ah=ge,Rh=TypeError,Lh=Ah("toPrimitive"),Ch=function(r,e){if(!Js(r)||Zs(r))return r;var t=Ph(r,Lh),n;if(t){if(e===void 0&&(e="default"),n=Ih(t,r,e),!Js(n)||Zs(n))return n;throw Rh("Can't convert object to primitive value")}return e===void 0&&(e="number"),Th(r,e)},Nh=Ch,Mh=Kr,Qr=function(r){var e=Nh(r,"string");return Mh(e)?e:e+""},kh=_e,ea=Ae,gi=kh.document,Fh=ea(gi)&&ea(gi.createElement),yi=function(r){return Fh?gi.createElement(r):{}},Bh=$e,jh=z,Uh=yi,ta=!Bh&&!jh(function(){return Object.defineProperty(Uh("div"),"a",{get:function(){return 7}}).a!=7}),Dh=$e,Vh=Te,Gh=ti,qh=or,Wh=qe,zh=Qr,Yh=ve,Kh=ta,ra=Object.getOwnPropertyDescriptor;At.f=Dh?ra:function(e,t){if(e=Wh(e),t=zh(t),Kh)try{return ra(e,t)}catch{}if(Yh(e,t))return qh(!Vh(Gh.f,e,t),e[t])};var Oe={},Qh=$e,Hh=z,na=Qh&&Hh(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Xh=Ae,Jh=String,Zh=TypeError,Ie=function(r){if(Xh(r))return r;throw Zh(Jh(r)+" is not an object")},ed=$e,td=ta,rd=na,Hr=Ie,ia=Qr,nd=TypeError,mi=Object.defineProperty,id=Object.getOwnPropertyDescriptor,_i="enumerable",bi="configurable",wi="writable";Oe.f=ed?rd?function(e,t,n){if(Hr(e),t=ia(t),Hr(n),typeof e=="function"&&t==="prototype"&&"value"in n&&wi in n&&!n[wi]){var i=id(e,t);i&&i[wi]&&(e[t]=n.value,n={configurable:bi in n?n[bi]:i[bi],enumerable:_i in n?n[_i]:i[_i],writable:!1})}return mi(e,t,n)}:mi:function(e,t,n){if(Hr(e),t=ia(t),Hr(n),td)try{return mi(e,t,n)}catch{}if("get"in n||"set"in n)throw nd("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var od=$e,sd=Oe,ad=or,ar=od?function(r,e,t){return sd.f(r,e,ad(1,t))}:function(r,e,t){return r[e]=t,r},oa={exports:{}},xi=$e,ld=ve,sa=Function.prototype,ud=xi&&Object.getOwnPropertyDescriptor,Si=ld(sa,"name"),fd=Si&&function(){}.name==="something",cd=Si&&(!xi||xi&&ud(sa,"name").configurable),lr={EXISTS:Si,PROPER:fd,CONFIGURABLE:cd},hd=K,dd=ae,Ei=pi,pd=hd(Function.toString);dd(Ei.inspectSource)||(Ei.inspectSource=function(r){return pd(r)});var $i=Ei.inspectSource,vd=_e,gd=ae,yd=$i,aa=vd.WeakMap,md=gd(aa)&&/native code/.test(yd(aa)),_d=ft.exports,bd=vi,la=_d("keys"),Xr=function(r){return la[r]||(la[r]=bd(r))},Jr={},wd=md,ua=_e,Oi=K,xd=Ae,Sd=ar,Ii=ve,Pi=pi,Ed=Xr,$d=Jr,fa="Object already initialized",Ti=ua.TypeError,Od=ua.WeakMap,Zr,ur,en,Id=function(r){return en(r)?ur(r):Zr(r,{})},Pd=function(r){return function(e){var t;if(!xd(e)||(t=ur(e)).type!==r)throw Ti("Incompatible receiver, "+r+" required");return t}};if(wd||Pi.state){var ht=Pi.state||(Pi.state=new Od),Td=Oi(ht.get),ca=Oi(ht.has),Ad=Oi(ht.set);Zr=function(r,e){if(ca(ht,r))throw new Ti(fa);return e.facade=r,Ad(ht,r,e),e},ur=function(r){return Td(ht,r)||{}},en=function(r){return ca(ht,r)}}else{var Mt=Ed("state");$d[Mt]=!0,Zr=function(r,e){if(Ii(r,Mt))throw new Ti(fa);return e.facade=r,Sd(r,Mt,e),e},ur=function(r){return Ii(r,Mt)?r[Mt]:{}},en=function(r){return Ii(r,Mt)}}var fr={set:Zr,get:ur,has:en,enforce:Id,getterFor:Pd},Rd=z,Ld=ae,tn=ve,Ai=$e,Cd=lr.CONFIGURABLE,Nd=$i,ha=fr,Md=ha.enforce,kd=ha.get,rn=Object.defineProperty,Fd=Ai&&!Rd(function(){return rn(function(){},"length",{value:8}).length!==8}),Bd=String(String).split("String"),jd=oa.exports=function(r,e,t){String(e).slice(0,7)==="Symbol("&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!tn(r,"name")||Cd&&r.name!==e)&&(Ai?rn(r,"name",{value:e,configurable:!0}):r.name=e),Fd&&t&&tn(t,"arity")&&r.length!==t.arity&&rn(r,"length",{value:t.arity});try{t&&tn(t,"constructor")&&t.constructor?Ai&&rn(r,"prototype",{writable:!1}):r.prototype&&(r.prototype=void 0)}catch{}var n=Md(r);return tn(n,"source")||(n.source=Bd.join(typeof e=="string"?e:"")),r};Function.prototype.toString=jd(function(){return Ld(this)&&kd(this).source||Nd(this)},"toString");var Ud=ae,Dd=Oe,Vd=oa.exports,Gd=di,He=function(r,e,t,n){n||(n={});var i=n.enumerable,s=n.name!==void 0?n.name:e;if(Ud(t)&&Vd(t,s,n),n.global)i?r[e]=t:Gd(e,t);else{try{n.unsafe?r[e]&&(i=!0):delete r[e]}catch{}i?r[e]=t:Dd.f(r,e,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return r},nn={},qd=Math.ceil,Wd=Math.floor,zd=Math.trunc||function(e){var t=+e;return(t>0?Wd:qd)(t)},Yd=zd,Ri=function(r){var e=+r;return e!==e||e===0?0:Yd(e)},Kd=Ri,Qd=Math.max,Hd=Math.min,da=function(r,e){var t=Kd(r);return t<0?Qd(t+e,0):Hd(t,e)},Xd=Ri,Jd=Math.min,pa=function(r){return r>0?Jd(Xd(r),9007199254740991):0},Zd=pa,on=function(r){return Zd(r.length)},ep=qe,tp=da,rp=on,va=function(r){return function(e,t,n){var i=ep(e),s=rp(i),a=tp(n,s),l;if(r&&t!=t){for(;s>a;)if(l=i[a++],l!=l)return!0}else for(;s>a;a++)if((r||a in i)&&i[a]===t)return r||a||0;return!r&&-1}},np={includes:va(!0),indexOf:va(!1)},ip=K,Li=ve,op=qe,sp=np.indexOf,ap=Jr,ga=ip([].push),ya=function(r,e){var t=op(r),n=0,i=[],s;for(s in t)!Li(ap,s)&&Li(t,s)&&ga(i,s);for(;e.length>n;)Li(t,s=e[n++])&&(~sp(i,s)||ga(i,s));return i},Ci=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],lp=ya,up=Ci,fp=up.concat("length","prototype");nn.f=Object.getOwnPropertyNames||function(e){return lp(e,fp)};var sn={};sn.f=Object.getOwnPropertySymbols;var cp=We,hp=K,dp=nn,pp=sn,vp=Ie,gp=hp([].concat),yp=cp("Reflect","ownKeys")||function(e){var t=dp.f(vp(e)),n=pp.f;return n?gp(t,n(e)):t},ma=ve,mp=yp,_p=At,bp=Oe,_a=function(r,e,t){for(var n=mp(e),i=bp.f,s=_p.f,a=0;a<n.length;a++){var l=n[a];!ma(r,l)&&!(t&&ma(t,l))&&i(r,l,s(e,l))}},wp=z,xp=ae,Sp=/#|\.prototype\./,cr=function(r,e){var t=$p[Ep(r)];return t==Ip?!0:t==Op?!1:xp(e)?wp(e):!!e},Ep=cr.normalize=function(r){return String(r).replace(Sp,".").toLowerCase()},$p=cr.data={},Op=cr.NATIVE="N",Ip=cr.POLYFILL="P",Pp=cr,Ni=_e,Tp=At.f,Ap=ar,Rp=He,Lp=di,Cp=_a,Np=Pp,be=function(r,e){var t=r.target,n=r.global,i=r.stat,s,a,l,f,u,c;if(n?a=Ni:i?a=Ni[t]||Lp(t,{}):a=(Ni[t]||{}).prototype,a)for(l in e){if(u=e[l],r.dontCallGetSet?(c=Tp(a,l),f=c&&c.value):f=a[l],s=Np(n?l:t+(i?".":"#")+l,r.forced),!s&&f!==void 0){if(typeof u==typeof f)continue;Cp(u,f)}(r.sham||f&&f.sham)&&Ap(u,"sham",!0),Rp(a,l,u,r)}},Mp=ge,kp=Mp("toStringTag"),ba={};ba[kp]="z";var Mi=String(ba)==="[object z]",Fp=Mi,Bp=ae,an=Rt,jp=ge,Up=jp("toStringTag"),Dp=Object,Vp=an(function(){return arguments}())=="Arguments",Gp=function(r,e){try{return r[e]}catch{}},ki=Fp?an:function(r){var e,t,n;return r===void 0?"Undefined":r===null?"Null":typeof(t=Gp(e=Dp(r),Up))=="string"?t:Vp?an(e):(n=an(e))=="Object"&&Bp(e.callee)?"Arguments":n},qp=ki,Wp=String,ze=function(r){if(qp(r)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Wp(r)},Fi={},zp=ya,Yp=Ci,wa=Object.keys||function(e){return zp(e,Yp)},Kp=$e,Qp=na,Hp=Oe,Xp=Ie,Jp=qe,Zp=wa;Fi.f=Kp&&!Qp?Object.defineProperties:function(e,t){Xp(e);for(var n=Jp(t),i=Zp(t),s=i.length,a=0,l;s>a;)Hp.f(e,l=i[a++],n[l]);return e};var ev=We,tv=ev("document","documentElement"),rv=Ie,nv=Fi,xa=Ci,iv=Jr,ov=tv,sv=yi,av=Xr,Sa=">",Ea="<",Bi="prototype",ji="script",$a=av("IE_PROTO"),Ui=function(){},Oa=function(r){return Ea+ji+Sa+r+Ea+"/"+ji+Sa},Ia=function(r){r.write(Oa("")),r.close();var e=r.parentWindow.Object;return r=null,e},lv=function(){var r=sv("iframe"),e="java"+ji+":",t;return r.style.display="none",ov.appendChild(r),r.src=String(e),t=r.contentWindow.document,t.open(),t.write(Oa("document.F=Object")),t.close(),t.F},ln,un=function(){try{ln=new ActiveXObject("htmlfile")}catch{}un=typeof document<"u"?document.domain&&ln?Ia(ln):lv():Ia(ln);for(var r=xa.length;r--;)delete un[Bi][xa[r]];return un()};iv[$a]=!0;var hr=Object.create||function(e,t){var n;return e!==null?(Ui[Bi]=rv(e),n=new Ui,Ui[Bi]=null,n[$a]=e):n=un(),t===void 0?n:nv.f(n,t)},Di={},uv=Qr,fv=Oe,cv=or,Pa=function(r,e,t){var n=uv(e);n in r?fv.f(r,n,cv(0,t)):r[n]=t},Ta=da,hv=on,dv=Pa,pv=Array,vv=Math.max,Aa=function(r,e,t){for(var n=hv(r),i=Ta(e,n),s=Ta(t===void 0?n:t,n),a=pv(vv(s-i,0)),l=0;i<s;i++,l++)dv(a,l,r[i]);return a.length=l,a},gv=Rt,yv=qe,Ra=nn.f,mv=Aa,La=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_v=function(r){try{return Ra(r)}catch{return mv(La)}};Di.f=function(e){return La&&gv(e)=="Window"?_v(e):Ra(yv(e))};var Vi={},bv=ge;Vi.f=bv;var wv=_e,xv=wv,Ca=xv,Sv=ve,Ev=Vi,$v=Oe.f,Na=function(r){var e=Ca.Symbol||(Ca.Symbol={});Sv(e,r)||$v(e,r,{value:Ev.f(r)})},Ov=Te,Iv=We,Pv=ge,Tv=He,Av=function(){var r=Iv("Symbol"),e=r&&r.prototype,t=e&&e.valueOf,n=Pv("toPrimitive");e&&!e[n]&&Tv(e,n,function(i){return Ov(t,this)},{arity:1})},Rv=Oe.f,Lv=ve,Cv=ge,Ma=Cv("toStringTag"),Gi=function(r,e,t){r&&!t&&(r=r.prototype),r&&!Lv(r,Ma)&&Rv(r,Ma,{configurable:!0,value:e})},ka=K,Nv=ui,Mv=ir,kv=ka(ka.bind),Fv=function(r,e){return Nv(r),e===void 0?r:Mv?kv(r,e):function(){return r.apply(e,arguments)}},Bv=Rt,qi=Array.isArray||function(e){return Bv(e)=="Array"},jv=K,Uv=z,Fa=ae,Dv=ki,Vv=We,Gv=$i,Ba=function(){},qv=[],ja=Vv("Reflect","construct"),Wi=/^\s*(?:class|function)\b/,Wv=jv(Wi.exec),zv=!Wi.exec(Ba),dr=function(e){if(!Fa(e))return!1;try{return ja(Ba,qv,e),!0}catch{return!1}},Ua=function(e){if(!Fa(e))return!1;switch(Dv(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return zv||!!Wv(Wi,Gv(e))}catch{return!0}};Ua.sham=!0;var Da=!ja||Uv(function(){var r;return dr(dr.call)||!dr(Object)||!dr(function(){r=!0})||r})?Ua:dr,Va=qi,Yv=Da,Kv=Ae,Qv=ge,Hv=Qv("species"),Ga=Array,Xv=function(r){var e;return Va(r)&&(e=r.constructor,Yv(e)&&(e===Ga||Va(e.prototype))?e=void 0:Kv(e)&&(e=e[Hv],e===null&&(e=void 0))),e===void 0?Ga:e},Jv=Xv,qa=function(r,e){return new(Jv(r))(e===0?0:e)},Zv=Fv,eg=K,tg=ii,rg=Ct,ng=on,ig=qa,Wa=eg([].push),Xe=function(r){var e=r==1,t=r==2,n=r==3,i=r==4,s=r==6,a=r==7,l=r==5||s;return function(f,u,c,d){for(var g=rg(f),S=tg(g),m=Zv(u,c),_=ng(S),I=0,b=d||ig,$=e?b(f,_):t||a?b(f,0):void 0,h,p;_>I;I++)if((l||I in S)&&(h=S[I],p=m(h,I,g),r))if(e)$[I]=p;else if(p)switch(r){case 3:return!0;case 5:return h;case 6:return I;case 2:Wa($,h)}else switch(r){case 4:return!1;case 7:Wa($,h)}return s?-1:n||i?i:$}},og={forEach:Xe(0),map:Xe(1),filter:Xe(2),some:Xe(3),every:Xe(4),find:Xe(5),findIndex:Xe(6),filterReject:Xe(7)},fn=be,zi=_e,Yi=Te,sg=K,kt=$e,Ft=Lt,ag=z,fe=ve,lg=zr,Ki=Ie,cn=qe,Qi=Qr,ug=ze,Hi=or,pr=hr,za=wa,fg=nn,Ya=Di,cg=sn,Ka=At,Qa=Oe,hg=Fi,Ha=ti,Xi=He,Ji=ft.exports,dg=Xr,Xa=Jr,Ja=vi,pg=ge,vg=Vi,gg=Na,yg=Av,mg=Gi,Za=fr,hn=og.forEach,Se=dg("hidden"),dn="Symbol",vr="prototype",_g=Za.set,el=Za.getterFor(dn),Re=Object[vr],dt=zi.Symbol,gr=dt&&dt[vr],bg=zi.TypeError,Zi=zi.QObject,tl=Ka.f,Je=Qa.f,rl=Ya.f,wg=Ha.f,nl=sg([].push),Ye=Ji("symbols"),yr=Ji("op-symbols"),xg=Ji("wks"),eo=!Zi||!Zi[vr]||!Zi[vr].findChild,to=kt&&ag(function(){return pr(Je({},"a",{get:function(){return Je(this,"a",{value:7}).a}})).a!=7})?function(r,e,t){var n=tl(Re,e);n&&delete Re[e],Je(r,e,t),n&&r!==Re&&Je(Re,e,n)}:Je,ro=function(r,e){var t=Ye[r]=pr(gr);return _g(t,{type:dn,tag:r,description:e}),kt||(t.description=e),t},pn=function(e,t,n){e===Re&&pn(yr,t,n),Ki(e);var i=Qi(t);return Ki(n),fe(Ye,i)?(n.enumerable?(fe(e,Se)&&e[Se][i]&&(e[Se][i]=!1),n=pr(n,{enumerable:Hi(0,!1)})):(fe(e,Se)||Je(e,Se,Hi(1,{})),e[Se][i]=!0),to(e,i,n)):Je(e,i,n)},no=function(e,t){Ki(e);var n=cn(t),i=za(n).concat(sl(n));return hn(i,function(s){(!kt||Yi(io,n,s))&&pn(e,s,n[s])}),e},Sg=function(e,t){return t===void 0?pr(e):no(pr(e),t)},io=function(e){var t=Qi(e),n=Yi(wg,this,t);return this===Re&&fe(Ye,t)&&!fe(yr,t)?!1:n||!fe(this,t)||!fe(Ye,t)||fe(this,Se)&&this[Se][t]?n:!0},il=function(e,t){var n=cn(e),i=Qi(t);if(!(n===Re&&fe(Ye,i)&&!fe(yr,i))){var s=tl(n,i);return s&&fe(Ye,i)&&!(fe(n,Se)&&n[Se][i])&&(s.enumerable=!0),s}},ol=function(e){var t=rl(cn(e)),n=[];return hn(t,function(i){!fe(Ye,i)&&!fe(Xa,i)&&nl(n,i)}),n},sl=function(r){var e=r===Re,t=rl(e?yr:cn(r)),n=[];return hn(t,function(i){fe(Ye,i)&&(!e||fe(Re,i))&&nl(n,Ye[i])}),n};Ft||(dt=function(){if(lg(gr,this))throw bg("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:ug(arguments[0]),t=Ja(e),n=function(i){this===Re&&Yi(n,yr,i),fe(this,Se)&&fe(this[Se],t)&&(this[Se][t]=!1),to(this,t,Hi(1,i))};return kt&&eo&&to(Re,t,{configurable:!0,set:n}),ro(t,e)},gr=dt[vr],Xi(gr,"toString",function(){return el(this).tag}),Xi(dt,"withoutSetter",function(r){return ro(Ja(r),r)}),Ha.f=io,Qa.f=pn,hg.f=no,Ka.f=il,fg.f=Ya.f=ol,cg.f=sl,vg.f=function(r){return ro(pg(r),r)},kt&&(Je(gr,"description",{configurable:!0,get:function(){return el(this).description}}),Xi(Re,"propertyIsEnumerable",io,{unsafe:!0}))),fn({global:!0,constructor:!0,wrap:!0,forced:!Ft,sham:!Ft},{Symbol:dt}),hn(za(xg),function(r){gg(r)}),fn({target:dn,stat:!0,forced:!Ft},{useSetter:function(){eo=!0},useSimple:function(){eo=!1}}),fn({target:"Object",stat:!0,forced:!Ft,sham:!kt},{create:Sg,defineProperty:pn,defineProperties:no,getOwnPropertyDescriptor:il}),fn({target:"Object",stat:!0,forced:!Ft},{getOwnPropertyNames:ol}),yg(),mg(dt,dn),Xa[Se]=!0;var Eg=Lt,al=Eg&&!!Symbol.for&&!!Symbol.keyFor,$g=be,Og=We,Ig=ve,Pg=ze,ll=ft.exports,Tg=al,oo=ll("string-to-symbol-registry"),Ag=ll("symbol-to-string-registry");$g({target:"Symbol",stat:!0,forced:!Tg},{for:function(r){var e=Pg(r);if(Ig(oo,e))return oo[e];var t=Og("Symbol")(e);return oo[e]=t,Ag[t]=e,t}});var Rg=be,Lg=ve,Cg=Kr,Ng=li,Mg=ft.exports,kg=al,ul=Mg("symbol-to-string-registry");Rg({target:"Symbol",stat:!0,forced:!kg},{keyFor:function(e){if(!Cg(e))throw TypeError(Ng(e)+" is not a symbol");if(Lg(ul,e))return ul[e]}});var Fg=ir,fl=Function.prototype,cl=fl.apply,hl=fl.call,so=typeof Reflect=="object"&&Reflect.apply||(Fg?hl.bind(cl):function(){return hl.apply(cl,arguments)}),Bg=K,dl=Bg([].slice),jg=be,pl=We,vl=so,Ug=Te,mr=K,gl=z,Dg=qi,Vg=ae,Gg=Ae,yl=Kr,ml=dl,qg=Lt,Ze=pl("JSON","stringify"),vn=mr(/./.exec),_l=mr("".charAt),Wg=mr("".charCodeAt),zg=mr("".replace),Yg=mr(1 .toString),Kg=/[\uD800-\uDFFF]/g,bl=/^[\uD800-\uDBFF]$/,wl=/^[\uDC00-\uDFFF]$/,xl=!qg||gl(function(){var r=pl("Symbol")();return Ze([r])!="[null]"||Ze({a:r})!="{}"||Ze(Object(r))!="{}"}),Sl=gl(function(){return Ze("\uDF06\uD834")!=='"\\udf06\\ud834"'||Ze("\uDEAD")!=='"\\udead"'}),Qg=function(r,e){var t=ml(arguments),n=e;if(!(!Gg(e)&&r===void 0||yl(r)))return Dg(e)||(e=function(i,s){if(Vg(n)&&(s=Ug(n,this,i,s)),!yl(s))return s}),t[1]=e,vl(Ze,null,t)},Hg=function(r,e,t){var n=_l(t,e-1),i=_l(t,e+1);return vn(bl,r)&&!vn(wl,i)||vn(wl,r)&&!vn(bl,n)?"\\u"+Yg(Wg(r,0),16):r};Ze&&jg({target:"JSON",stat:!0,arity:3,forced:xl||Sl},{stringify:function(e,t,n){var i=ml(arguments),s=vl(xl?Qg:Ze,null,i);return Sl&&typeof s=="string"?zg(s,Kg,Hg):s}});var Xg=be,Jg=Lt,Zg=z,El=sn,ey=Ct,ty=!Jg||Zg(function(){El.f(1)});Xg({target:"Object",stat:!0,forced:ty},{getOwnPropertySymbols:function(e){var t=El.f;return t?t(ey(e)):[]}});var ry=be,ny=$e,iy=_e,gn=K,oy=ve,sy=ae,ay=zr,ly=ze,uy=Oe.f,fy=_a,Ke=iy.Symbol,pt=Ke&&Ke.prototype;if(ny&&sy(Ke)&&(!("description"in pt)||Ke().description!==void 0)){var $l={},yn=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:ly(arguments[0]),t=ay(pt,this)?new Ke(e):e===void 0?Ke():Ke(e);return e===""&&($l[t]=!0),t};fy(yn,Ke),yn.prototype=pt,pt.constructor=yn;var cy=String(Ke("test"))=="Symbol(test)",hy=gn(pt.toString),dy=gn(pt.valueOf),py=/^Symbol\((.*)\)[^)]+$/,vy=gn("".replace),gy=gn("".slice);uy(pt,"description",{configurable:!0,get:function(){var e=dy(this),t=hy(e);if(oy($l,e))return"";var n=cy?gy(t,7,-1):vy(t,py,"$1");return n===""?void 0:n}}),ry({global:!0,constructor:!0,forced:!0},{Symbol:yn})}var yy=Na;yy("iterator");var my=TypeError,_y=9007199254740991,by=function(r){if(r>_y)throw my("Maximum allowed index exceeded");return r},wy=z,xy=ge,Sy=ai,Ey=xy("species"),$y=function(r){return Sy>=51||!wy(function(){var e=[],t=e.constructor={};return t[Ey]=function(){return{foo:1}},e[r](Boolean).foo!==1})},Oy=be,Iy=z,Py=qi,Ty=Ae,Ay=Ct,Ry=on,Ol=by,Il=Pa,Ly=qa,Cy=$y,Ny=ge,My=ai,Pl=Ny("isConcatSpreadable"),ky=My>=51||!Iy(function(){var r=[];return r[Pl]=!1,r.concat()[0]!==r}),Fy=Cy("concat"),By=function(r){if(!Ty(r))return!1;var e=r[Pl];return e!==void 0?!!e:Py(r)},jy=!ky||!Fy;Oy({target:"Array",proto:!0,arity:1,forced:jy},{concat:function(e){var t=Ay(this),n=Ly(t,0),i=0,s,a,l,f,u;for(s=-1,l=arguments.length;s<l;s++)if(u=s===-1?t:arguments[s],By(u))for(f=Ry(u),Ol(i+f),a=0;a<f;a++,i++)a in u&&Il(n,i,u[a]);else Ol(i+1),Il(n,i++,u);return n.length=i,n}});var Uy=ge,Dy=hr,Vy=Oe.f,ao=Uy("unscopables"),lo=Array.prototype;lo[ao]==null&&Vy(lo,ao,{configurable:!0,value:Dy(null)});var Gy=function(r){lo[ao][r]=!0},uo={},qy=z,Tl=!qy(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}),Wy=ve,zy=ae,Yy=Ct,Ky=Xr,Qy=Tl,Al=Ky("IE_PROTO"),fo=Object,Hy=fo.prototype,mn=Qy?fo.getPrototypeOf:function(r){var e=Yy(r);if(Wy(e,Al))return e[Al];var t=e.constructor;return zy(t)&&e instanceof t?t.prototype:e instanceof fo?Hy:null},Xy=z,Jy=ae,Rl=mn,Zy=He,em=ge,co=em("iterator"),Ll=!1,vt,ho,po;[].keys&&(po=[].keys(),"next"in po?(ho=Rl(Rl(po)),ho!==Object.prototype&&(vt=ho)):Ll=!0);var tm=vt==null||Xy(function(){var r={};return vt[co].call(r)!==r});tm&&(vt={}),Jy(vt[co])||Zy(vt,co,function(){return this});var Cl={IteratorPrototype:vt,BUGGY_SAFARI_ITERATORS:Ll},rm=Cl.IteratorPrototype,nm=hr,im=or,om=Gi,sm=uo,am=function(){return this},lm=function(r,e,t,n){var i=e+" Iterator";return r.prototype=nm(rm,{next:im(+!n,t)}),om(r,i,!1),sm[i]=am,r},um=ae,fm=String,cm=TypeError,hm=function(r){if(typeof r=="object"||um(r))return r;throw cm("Can't set "+fm(r)+" as a prototype")},dm=K,pm=Ie,vm=hm,gm=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,e={},t;try{t=dm(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(e,[]),r=e instanceof Array}catch{}return function(i,s){return pm(i),vm(s),r?t(i,s):i.__proto__=s,i}}():void 0),ym=be,mm=Te,Nl=lr,_m=ae,bm=lm,Ml=mn,kl=gm,wm=Gi,xm=ar,vo=He,Sm=ge,Em=uo,Fl=Cl,$m=Nl.PROPER,Om=Nl.CONFIGURABLE,Bl=Fl.IteratorPrototype,_n=Fl.BUGGY_SAFARI_ITERATORS,_r=Sm("iterator"),jl="keys",br="values",Ul="entries",Im=function(){return this},Dl=function(r,e,t,n,i,s,a){bm(t,e,n);var l=function(b){if(b===i&&g)return g;if(!_n&&b in c)return c[b];switch(b){case jl:return function(){return new t(this,b)};case br:return function(){return new t(this,b)};case Ul:return function(){return new t(this,b)}}return function(){return new t(this)}},f=e+" Iterator",u=!1,c=r.prototype,d=c[_r]||c["@@iterator"]||i&&c[i],g=!_n&&d||l(i),S=e=="Array"&&c.entries||d,m,_,I;if(S&&(m=Ml(S.call(new r)),m!==Object.prototype&&m.next&&(Ml(m)!==Bl&&(kl?kl(m,Bl):_m(m[_r])||vo(m,_r,Im)),wm(m,f,!0))),$m&&i==br&&d&&d.name!==br&&(Om?xm(c,"name",br):(u=!0,g=function(){return mm(d,this)})),i)if(_={values:l(br),keys:s?g:l(jl),entries:l(Ul)},a)for(I in _)(_n||u||!(I in c))&&vo(c,I,_[I]);else ym({target:e,proto:!0,forced:_n||u},_);return c[_r]!==g&&vo(c,_r,g,{name:i}),Em[e]=g,_},Pm=qe,go=Gy,Vl=uo,Gl=fr,Tm=Oe.f,Am=Dl,Rm=$e,ql="Array Iterator",Lm=Gl.set,Cm=Gl.getterFor(ql),Nm=Am(Array,"Array",function(r,e){Lm(this,{type:ql,target:Pm(r),index:0,kind:e})},function(){var r=Cm(this),e=r.target,t=r.kind,n=r.index++;return!e||n>=e.length?(r.target=void 0,{value:void 0,done:!0}):t=="keys"?{value:n,done:!1}:t=="values"?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values"),Wl=Vl.Arguments=Vl.Array;if(go("keys"),go("values"),go("entries"),Rm&&Wl.name!=="values")try{Tm(Wl,"name",{value:"values"})}catch{}var Mm=z,km=function(r,e){var t=[][r];return!!t&&Mm(function(){t.call(null,e||function(){return 1},1)})},Fm=be,Bm=K,jm=ii,Um=qe,Dm=km,Vm=Bm([].join),Gm=jm!=Object,qm=Dm("join",",");Fm({target:"Array",proto:!0,forced:Gm||!qm},{join:function(e){return Vm(Um(this),e===void 0?",":e)}});var Wm=be,zm=z,Ym=qe,zl=At.f,Yl=$e,Km=zm(function(){zl(1)}),Qm=!Yl||Km;Wm({target:"Object",stat:!0,forced:Qm,sham:!Yl},{getOwnPropertyDescriptor:function(e,t){return zl(Ym(e),t)}});var Hm=be,Xm=z,Jm=Ct,Kl=mn,Zm=Tl,e_=Xm(function(){Kl(1)});Hm({target:"Object",stat:!0,forced:e_,sham:!Zm},{getPrototypeOf:function(e){return Kl(Jm(e))}});var t_=Mi,r_=ki,n_=t_?{}.toString:function(){return"[object "+r_(this)+"]"},i_=Mi,o_=He,s_=n_;i_||o_(Object.prototype,"toString",s_,{unsafe:!0});var Ql=ve,a_=function(r){return r!==void 0&&(Ql(r,"value")||Ql(r,"writable"))},l_=be,u_=Te,f_=Ae,c_=Ie,h_=a_,d_=At,p_=mn;function Hl(r,e){var t=arguments.length<3?r:arguments[2],n,i;if(c_(r)===t)return r[e];if(n=d_.f(r,e),n)return h_(n)?n.value:n.get===void 0?void 0:u_(n.get,t);if(f_(i=p_(r)))return Hl(i,e,t)}l_({target:"Reflect",stat:!0},{get:Hl});var yo=K,v_=Ri,g_=ze,y_=sr,m_=yo("".charAt),Xl=yo("".charCodeAt),__=yo("".slice),Jl=function(r){return function(e,t){var n=g_(y_(e)),i=v_(t),s=n.length,a,l;return i<0||i>=s?r?"":void 0:(a=Xl(n,i),a<55296||a>56319||i+1===s||(l=Xl(n,i+1))<56320||l>57343?r?m_(n,i):a:r?__(n,i,i+2):(a-55296<<10)+(l-56320)+65536)}},Zl={codeAt:Jl(!1),charAt:Jl(!0)},b_=Zl.charAt,w_=ze,eu=fr,x_=Dl,tu="String Iterator",S_=eu.set,E_=eu.getterFor(tu);x_(String,"String",function(r){S_(this,{type:tu,string:w_(r),index:0})},function(){var e=E_(this),t=e.string,n=e.index,i;return n>=t.length?{value:void 0,done:!0}:(i=b_(t,n),e.index+=i.length,{value:i,done:!1})});var $_=Ie,ru=function(){var r=$_(this),e="";return r.hasIndices&&(e+="d"),r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.dotAll&&(e+="s"),r.unicode&&(e+="u"),r.unicodeSets&&(e+="v"),r.sticky&&(e+="y"),e},mo=z,O_=_e,_o=O_.RegExp,bo=mo(function(){var r=_o("a","y");return r.lastIndex=2,r.exec("abcd")!=null}),I_=bo||mo(function(){return!_o("a","y").sticky}),P_=bo||mo(function(){var r=_o("^r","gy");return r.lastIndex=2,r.exec("str")!=null}),nu={BROKEN_CARET:P_,MISSED_STICKY:I_,UNSUPPORTED_Y:bo},T_=z,A_=_e,R_=A_.RegExp,L_=T_(function(){var r=R_(".","s");return!(r.dotAll&&r.exec(`
`)&&r.flags==="s")}),C_=z,N_=_e,M_=N_.RegExp,k_=C_(function(){var r=M_("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),Bt=Te,bn=K,F_=ze,B_=ru,j_=nu,U_=ft.exports,D_=hr,V_=fr.get,G_=L_,q_=k_,W_=U_("native-string-replace",String.prototype.replace),wn=RegExp.prototype.exec,wo=wn,z_=bn("".charAt),Y_=bn("".indexOf),K_=bn("".replace),xo=bn("".slice),So=function(){var r=/a/,e=/b*/g;return Bt(wn,r,"a"),Bt(wn,e,"a"),r.lastIndex!==0||e.lastIndex!==0}(),iu=j_.BROKEN_CARET,Eo=/()??/.exec("")[1]!==void 0,Q_=So||Eo||iu||G_||q_;Q_&&(wo=function(e){var t=this,n=V_(t),i=F_(e),s=n.raw,a,l,f,u,c,d,g;if(s)return s.lastIndex=t.lastIndex,a=Bt(wo,s,i),t.lastIndex=s.lastIndex,a;var S=n.groups,m=iu&&t.sticky,_=Bt(B_,t),I=t.source,b=0,$=i;if(m&&(_=K_(_,"y",""),Y_(_,"g")===-1&&(_+="g"),$=xo(i,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&z_(i,t.lastIndex-1)!==`
`)&&(I="(?: "+I+")",$=" "+$,b++),l=new RegExp("^(?:"+I+")",_)),Eo&&(l=new RegExp("^"+I+"$(?!\\s)",_)),So&&(f=t.lastIndex),u=Bt(wn,m?l:t,$),m?u?(u.input=xo(u.input,b),u[0]=xo(u[0],b),u.index=t.lastIndex,t.lastIndex+=u[0].length):t.lastIndex=0:So&&u&&(t.lastIndex=t.global?u.index+u[0].length:f),Eo&&u&&u.length>1&&Bt(W_,u[0],l,function(){for(c=1;c<arguments.length-2;c++)arguments[c]===void 0&&(u[c]=void 0)}),u&&S)for(u.groups=d=D_(null),c=0;c<S.length;c++)g=S[c],d[g[0]]=u[g[1]];return u});var xn=wo,H_=be,ou=xn;H_({target:"RegExp",proto:!0,forced:/./.exec!==ou},{exec:ou});var su=K,au=He,X_=xn,lu=z,uu=ge,J_=ar,Z_=uu("species"),$o=RegExp.prototype,eb=function(r,e,t,n){var i=uu(r),s=!lu(function(){var u={};return u[i]=function(){return 7},""[r](u)!=7}),a=s&&!lu(function(){var u=!1,c=/a/;return r==="split"&&(c={},c.constructor={},c.constructor[Z_]=function(){return c},c.flags="",c[i]=/./[i]),c.exec=function(){return u=!0,null},c[i](""),!u});if(!s||!a||t){var l=su(/./[i]),f=e(i,""[r],function(u,c,d,g,S){var m=su(u),_=c.exec;return _===X_||_===$o.exec?s&&!S?{done:!0,value:l(c,d,g)}:{done:!0,value:m(d,c,g)}:{done:!1}});au(String.prototype,r,f[0]),au($o,i,f[1])}n&&J_($o[i],"sham",!0)},tb=Ae,rb=Rt,nb=ge,ib=nb("match"),ob=function(r){var e;return tb(r)&&((e=r[ib])!==void 0?!!e:rb(r)=="RegExp")},sb=Da,ab=li,lb=TypeError,fu=function(r){if(sb(r))return r;throw lb(ab(r)+" is not a constructor")},cu=Ie,ub=fu,fb=ge,cb=fb("species"),hb=function(r,e){var t=cu(r).constructor,n;return t===void 0||(n=cu(t)[cb])==null?e:ub(n)},db=Zl.charAt,pb=function(r,e,t){return e+(t?db(r,e).length:1)},hu=Te,vb=Ie,gb=ae,yb=Rt,mb=xn,_b=TypeError,bb=function(r,e){var t=r.exec;if(gb(t)){var n=hu(t,r,e);return n!==null&&vb(n),n}if(yb(r)==="RegExp")return hu(mb,r,e);throw _b("RegExp#exec called on incompatible receiver")},wb=so,wr=Te,Oo=K,xb=eb,Sb=ob,Eb=Ie,du=sr,$b=hb,Ob=pb,Ib=pa,Io=ze,Pb=qs,pu=Aa,vu=bb,Tb=xn,Ab=nu,Rb=z,jt=Ab.UNSUPPORTED_Y,gu=4294967295,Lb=Math.min,yu=[].push,Cb=Oo(/./.exec),Ut=Oo(yu),xr=Oo("".slice),Nb=!Rb(function(){var r=/(?:)/,e=r.exec;r.exec=function(){return e.apply(this,arguments)};var t="ab".split(r);return t.length!==2||t[0]!=="a"||t[1]!=="b"});xb("split",function(r,e,t){var n;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?n=function(i,s){var a=Io(du(this)),l=s===void 0?gu:s>>>0;if(l===0)return[];if(i===void 0)return[a];if(!Sb(i))return wr(e,a,i,l);for(var f=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),c=0,d=new RegExp(i.source,u+"g"),g,S,m;(g=wr(Tb,d,a))&&(S=d.lastIndex,!(S>c&&(Ut(f,xr(a,c,g.index)),g.length>1&&g.index<a.length&&wb(yu,f,pu(g,1)),m=g[0].length,c=S,f.length>=l)));)d.lastIndex===g.index&&d.lastIndex++;return c===a.length?(m||!Cb(d,""))&&Ut(f,""):Ut(f,xr(a,c)),f.length>l?pu(f,0,l):f}:"0".split(void 0,0).length?n=function(i,s){return i===void 0&&s===0?[]:wr(e,this,i,s)}:n=e,[function(s,a){var l=du(this),f=s==null?void 0:Pb(s,r);return f?wr(f,s,l,a):wr(n,Io(l),s,a)},function(i,s){var a=Eb(this),l=Io(i),f=t(n,a,l,s,n!==e);if(f.done)return f.value;var u=$b(a,RegExp),c=a.unicode,d=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(jt?"g":"y"),g=new u(jt?"^(?:"+a.source+")":a,d),S=s===void 0?gu:s>>>0;if(S===0)return[];if(l.length===0)return vu(g,l)===null?[l]:[];for(var m=0,_=0,I=[];_<l.length;){g.lastIndex=jt?0:_;var b=vu(g,jt?xr(l,_):l),$;if(b===null||($=Lb(Ib(g.lastIndex+(jt?_:0)),l.length))===m)_=Ob(l,_,c);else{if(Ut(I,xr(l,m,_)),I.length===S)return I;for(var h=1;h<=b.length-1;h++)if(Ut(I,b[h]),I.length===S)return I;_=m=$}}return Ut(I,xr(l,m)),I}]},!Nb,jt);var mu=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,Mb=K,kb=sr,Fb=ze,Bb=mu,_u=Mb("".replace),Sn="["+Bb+"]",jb=RegExp("^"+Sn+Sn+"*"),Ub=RegExp(Sn+Sn+"*$"),Po=function(r){return function(e){var t=Fb(kb(e));return r&1&&(t=_u(t,jb,"")),r&2&&(t=_u(t,Ub,"")),t}},Db={start:Po(1),end:Po(2),trim:Po(3)},Vb=lr.PROPER,Gb=z,bu=mu,wu="\u200B\x85\u180E",qb=function(r){return Gb(function(){return!!bu[r]()||wu[r]()!==wu||Vb&&bu[r].name!==r})},Wb=be,zb=Db.trim,Yb=qb;Wb({target:"String",proto:!0,forced:Yb("trim")},{trim:function(){return zb(this)}});var Kb={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Qb=yi,To=Qb("span").classList,xu=To&&To.constructor&&To.constructor.prototype,Hb=xu===Object.prototype?void 0:xu,Su=_e,Eu=Kb,Xb=Hb,Sr=Nm,Ao=ar,$u=ge,Ro=$u("iterator"),Ou=$u("toStringTag"),Lo=Sr.values,Iu=function(r,e){if(r){if(r[Ro]!==Lo)try{Ao(r,Ro,Lo)}catch{r[Ro]=Lo}if(r[Ou]||Ao(r,Ou,e),Eu[e]){for(var t in Sr)if(r[t]!==Sr[t])try{Ao(r,t,Sr[t])}catch{r[t]=Sr[t]}}}};for(var Co in Eu)Iu(Su[Co]&&Su[Co].prototype,Co);Iu(Xb,"DOMTokenList");var Jb=$e,Zb=lr.EXISTS,Pu=K,e0=Oe.f,Tu=Function.prototype,t0=Pu(Tu.toString),Au=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,r0=Pu(Au.exec),n0="name";Jb&&!Zb&&e0(Tu,n0,{configurable:!0,get:function(){try{return r0(Au,t0(this))[1]}catch{return""}}});var i0=be,o0=z,s0=Di.f,a0=o0(function(){return!Object.getOwnPropertyNames(1)});i0({target:"Object",stat:!0,forced:a0},{getOwnPropertyNames:s0});var Ru=K,l0=ui,u0=Ae,f0=ve,Lu=dl,c0=ir,Cu=Function,h0=Ru([].concat),d0=Ru([].join),No={},p0=function(r,e,t){if(!f0(No,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";No[e]=Cu("C,a","return new C("+d0(n,",")+")")}return No[e](r,t)},v0=c0?Cu.bind:function(e){var t=l0(this),n=t.prototype,i=Lu(arguments,1),s=function(){var l=h0(i,Lu(arguments));return this instanceof s?p0(t,l.length,l):t.apply(e,l)};return u0(n)&&(s.prototype=n),s},g0=be,y0=We,Mo=so,m0=v0,Nu=fu,_0=Ie,Mu=Ae,b0=hr,ku=z,ko=y0("Reflect","construct"),w0=Object.prototype,x0=[].push,Fu=ku(function(){function r(){}return!(ko(function(){},[],r)instanceof r)}),Bu=!ku(function(){ko(function(){})}),ju=Fu||Bu;g0({target:"Reflect",stat:!0,forced:ju,sham:ju},{construct:function(e,t){Nu(e),_0(t);var n=arguments.length<3?e:Nu(arguments[2]);if(Bu&&!Fu)return ko(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return Mo(x0,i,t),new(Mo(m0,e,i))}var s=n.prototype,a=b0(Mu(s)?s:w0),l=Mo(e,a,t);return Mu(l)?l:a}});var S0=Te,E0=ve,$0=zr,O0=ru,Uu=RegExp.prototype,I0=function(r){var e=r.flags;return e===void 0&&!("flags"in Uu)&&!E0(r,"flags")&&$0(Uu,r)?S0(O0,r):e},P0=lr.PROPER,T0=He,A0=Ie,Du=ze,R0=z,L0=I0,Fo="toString",C0=RegExp.prototype,Vu=C0[Fo],N0=R0(function(){return Vu.call({source:"a",flags:"b"})!="/a/b"}),M0=P0&&Vu.name!=Fo;(N0||M0)&&T0(RegExp.prototype,Fo,function(){var e=A0(this),t=Du(e.source),n=Du(L0(e));return"/"+t+"/"+n},{unsafe:!0});var Gu={exports:{}};(function(r,e){(function(t,n,i){var s=Object.getOwnPropertyNames,a=Object.defineProperty,l=Function.prototype.toString,f=Object.create,u=Object.prototype.hasOwnProperty,c=/^\n?function\s?(\w*)?_?\(/;function d(b,$,h){return typeof $=="function"&&(h=$,$=g(h).replace(/_$/,"")),a(b,$,{configurable:!0,writable:!0,value:h})}function g(b){return typeof b!="function"?"":"name"in b?b.name:l.call(b).match(c)[1]}var S=function(){var b={value:{writable:!0,value:i}},$="return function(k){if(k===s)return l}",h=f(null),p=function(){var w=Math.random().toString(36).slice(2);return w in h?p():h[w]=w},v=p(),E=function(w){if(u.call(w,v))return w[v];if(!Object.isExtensible(w))throw new TypeError("Object must be extensible");var T=f(null);return a(w,v,{value:T}),T};d(Object,function(T){var L=s(T);return u.call(T,v)&&L.splice(L.indexOf(v),1),L});function O(){var w=p(),T={};this.unlock=function(L){var k=E(L);if(u.call(k,w))return k[w](T);var te=f(null,b);return a(k,w,{value:new Function("s","l",$)(T,te)}),te}}return d(O.prototype,function(T){return this.unlock(T).value}),d(O.prototype,function(T,L){this.unlock(T).value=L}),O}(),m=function(b){var $=function(y){if(y==null||typeof y!="object"&&typeof y!="function")throw new TypeError("Invalid WeakMap key")},h=function(y,R){var M=b.unlock(y);if(M.value)throw new TypeError("Object is already a WeakMap");M.value=R},p=function(y){var R=b.unlock(y).value;if(!R)throw new TypeError("WeakMap is not generic");return R},v=function(y,R){R!==null&&typeof R=="object"&&typeof R.forEach=="function"&&R.forEach(function(M,X){M instanceof Array&&M.length===2&&w.call(y,R[X][0],R[X][1])})};function E(y){if(this===t||this==null||this===E.prototype)return new E(y);h(this,new S),v(this,y)}function O(y){$(y);var R=p(this).get(y);return R===n?i:R}function w(y,R){$(y),p(this).set(y,R===i?n:R)}function T(y){return $(y),p(this).get(y)!==i}function L(y){$(y);var R=p(this),M=R.get(y)!==i;return R.set(y,i),M}function k(){return p(this),"[object WeakMap]"}try{var le=("return "+L).replace("e_","\\u0065"),te=new Function("unwrap","validate",le)(p,$)}catch{var te=L}var le=(""+Object).split("Object"),x=function(){return le[0]+g(this)+le[1]};d(x,x);var C={__proto__:[]}instanceof Array?function(y){y.__proto__=x}:function(y){d(y,x)};return C(E),[k,O,w,T,te].forEach(function(y){d(E.prototype,y),C(y)}),E}(new S),_=Object.create?function(){return Object.create(null)}:function(){return{}};function I(b){var $=new m;b||(b=_);function h(p,v){return v||arguments.length===2?$.set(p,v):(v=$.get(p),v===i&&(v=b(p),$.set(p,v))),v}return h}r.exports=m,m.createStorage=I,t.WeakMap&&(t.WeakMap.createStorage=I)})((0,eval)("this"))})(Gu);var k0=F0(Gu.exports);function F0(r){return r&&r.__esModule?r:{default:r}}function B0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function En(r,e,t){return B0()?En=Reflect.construct:En=function(i,s,a){var l=[null];l.push.apply(l,s);var f=Function.bind.apply(i,l),u=new f;return a&&Bo(u,a.prototype),u},En.apply(null,arguments)}function Bo(r,e){return Bo=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Bo(r,e)}function j0(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qu(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Wu(r,e,t){return e&&qu(r.prototype,e),t&&qu(r,t),r}function U0(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Er=new k0.default,jo=function(){Wu(r,[{key:"get",value:function(t){return this.getHiddenProperty("error")[t]}},{key:"set",value:function(t,n){this.getHiddenProperty("error")[t]=n}},{key:"defineHiddenProperty",value:function(t,n){var i=Er.has(this)?Er.get(this):{};i[t]=n,Er.set(this,i)}},{key:"getHiddenProperty",value:function(t,n){return Er.has(this)?Er.get(this)[t]:n}},{key:"stack",get:function(){return this.getHiddenProperty("error").stack},set:function(t){this.getHiddenProperty("error").stack=t}},{key:"name",get:function(){return this.getHiddenProperty("error").name},set:function(t){this.getHiddenProperty("error").name=t}},{key:"message",get:function(){return this.getHiddenProperty("error").message},set:function(t){this.getHiddenProperty("error").message=t}}]);function r(){j0(this,r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=En(Error,t);i.name=this.constructor.name,this.defineHiddenProperty("error",i)}return Wu(r,[{key:"toJSON",value:function(){if(!r.searchPrototype)return{stack:this.stack,message:this.message,name:this.name};for(var t={},n=this,i=[n];n=Object.getPrototypeOf(n);)i.push(n);for(var s=0,a=i;s<a.length;s++){var l=a[s],f=!0,u=!1,c=void 0;try{for(var d=Object.getOwnPropertyNames(l)[Symbol.iterator](),g;!(f=(g=d.next()).done);f=!0){var S=g.value;if(!t.hasOwnProperty(S)){var m=Object.getOwnPropertyDescriptor(l,S);if(m){var _=m.get?m.get.call(this):m.value;if(l.isPrototypeOf(_))continue;typeof _!="function"&&(t[S]=_)}}}}catch(I){u=!0,c=I}finally{try{!f&&d.return!=null&&d.return()}finally{if(u)throw c}}}return t}}]),r}();U0(jo,"searchPrototype",!1),Object.setPrototypeOf(jo.prototype,Error.prototype);var D0=jo,zu=V0(D0);function V0(r){return r&&r.__esModule?r:{default:r}}function $n(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$n=function(t){return typeof t}:$n=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(r)}function G0(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function q0(r,e){return e&&($n(e)==="object"||typeof e=="function")?e:W0(r)}function W0(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Yu(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function z0(r,e,t){return e&&Yu(r.prototype,e),t&&Yu(r,t),r}function Y0(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Uo(r,e)}function Uo(r,e){return Uo=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Uo(r,e)}function Dt(r,e,t){return typeof Reflect<"u"&&Reflect.get?Dt=Reflect.get:Dt=function(i,s,a){var l=K0(i,s);if(!!l){var f=Object.getOwnPropertyDescriptor(l,s);return f.get?f.get.call(a):f.value}},Dt(r,e,t||r)}function K0(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=gt(r),r!==null););return r}function gt(r){return gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gt(r)}function Do(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var On=function(r){Y0(e,r),z0(e,[{key:"serializeNonError",value:function(n){try{return JSON.stringify(n,null,2)}catch{}return n}},{key:"resolveStackFromError",value:function(n){return n===this&&e.globalStackProperty==="stack"?Dt(gt(e.prototype),"stack",this):n[e.globalStackProperty]}},{key:"getLongStack",value:function(){var n=[],i=!0,s=!1,a=void 0;try{for(var l=this.causes()[Symbol.iterator](),f;!(i=(f=l.next()).done);i=!0){var u=f.value;u instanceof e?n.push(u.getLongStack()):u instanceof Error?n.push(this.resolveStackFromError(u)):n.push(this.serializeNonError(u))}}catch(d){s=!0,a=d}finally{try{!i&&l.return!=null&&l.return()}finally{if(s)throw a}}var c=e.indent+n.join(`
`).split(`
`).join(`
`+e.indent);return(this.resolveStackFromError(this)+`
`+c).trim()}},{key:"messages",value:function(){var n=[Dt(gt(e.prototype),"message",this)],i=!0,s=!1,a=void 0;try{for(var l=this.causes()[Symbol.iterator](),f;!(i=(f=l.next()).done);i=!0){var u=f.value;u instanceof e?n=n.concat(u.messages()):u instanceof Error?n.push(u.message):n.push(u)}}catch(c){s=!0,a=c}finally{try{!i&&l.return!=null&&l.return()}finally{if(s)throw a}}return n}},{key:"cause",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.getHiddenProperty("causes",[])[n]}},{key:"causes",value:function(){return this.getHiddenProperty("causes",[])}},{key:"stack",get:function(){if(this.getHiddenProperty("useBase"))return Dt(gt(e.prototype),"stack",this);this.defineHiddenProperty("useBase",!0);var n=this.getLongStack();return this.defineHiddenProperty("useBase",!1),n}}]);function e(t){var n;G0(this,e),n=q0(this,gt(e).call(this,t));for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return n.defineHiddenProperty("causes",s),n}return e}(zu.default);Do(On,"indent","    "),Do(On,"globalStackProperty","stack"),Do(On,"Exception",zu.default);var Q0=On;function Vo(r){return r instanceof o.Point||r instanceof o.Vector||r instanceof o.Segment||r instanceof o.Line||r instanceof o.Box||r instanceof o.Polygon||r instanceof o.Face}function H0(r){return r instanceof o.Point}function X0(r){return r instanceof o.Vector}function J0(r){return r instanceof o.Segment}function Z0(r){return r instanceof o.Line}function Go(r){return r instanceof o.Box}function ew(r){return r instanceof o.Polygon}const tw=Pc(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var qo=typeof Map=="function"&&Map.prototype,Wo=Object.getOwnPropertyDescriptor&&qo?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,In=qo&&Wo&&typeof Wo.get=="function"?Wo.get:null,rw=qo&&Map.prototype.forEach,zo=typeof Set=="function"&&Set.prototype,Yo=Object.getOwnPropertyDescriptor&&zo?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Pn=zo&&Yo&&typeof Yo.get=="function"?Yo.get:null,nw=zo&&Set.prototype.forEach,iw=typeof WeakMap=="function"&&WeakMap.prototype,$r=iw?WeakMap.prototype.has:null,ow=typeof WeakSet=="function"&&WeakSet.prototype,Or=ow?WeakSet.prototype.has:null,sw=typeof WeakRef=="function"&&WeakRef.prototype,Ku=sw?WeakRef.prototype.deref:null,aw=Boolean.prototype.valueOf,lw=Object.prototype.toString,uw=Function.prototype.toString,fw=String.prototype.match,Ko=String.prototype.slice,et=String.prototype.replace,cw=String.prototype.toUpperCase,Qu=String.prototype.toLowerCase,Hu=RegExp.prototype.test,Xu=Array.prototype.concat,Ge=Array.prototype.join,hw=Array.prototype.slice,Ju=Math.floor,Qo=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ho=Object.getOwnPropertySymbols,Xo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",we=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Vt?"object":"symbol")?Symbol.toStringTag:null,Zu=Object.prototype.propertyIsEnumerable,ef=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function tf(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Hu.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-Ju(-r):Ju(r);if(n!==r){var i=String(n),s=Ko.call(e,i.length+1);return et.call(i,t,"$&_")+"."+et.call(et.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return et.call(e,t,"$&_")}var Jo=tw,rf=Jo.custom,nf=af(rf)?rf:null,dw=function r(e,t,n,i){var s=t||{};if(tt(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(tt(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=tt(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(tt(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(tt(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return uf(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var f=String(e);return l?tf(e,f):f}if(typeof e=="bigint"){var u=String(e)+"n";return l?tf(e,u):u}var c=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return Zo(e)?"[Array]":"[Object]";var d=Rw(s,n);if(typeof i>"u")i=[];else if(lf(i,e)>=0)return"[Circular]";function g(le,x,C){if(x&&(i=hw.call(i),i.push(x)),C){var y={depth:s.depth};return tt(s,"quoteStyle")&&(y.quoteStyle=s.quoteStyle),r(le,y,n+1,i)}return r(le,s,n+1,i)}if(typeof e=="function"&&!sf(e)){var S=xw(e),m=Tn(e,g);return"[Function"+(S?": "+S:" (anonymous)")+"]"+(m.length>0?" { "+Ge.call(m,", ")+" }":"")}if(af(e)){var _=Vt?et.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Xo.call(e);return typeof e=="object"&&!Vt?Ir(_):_}if(Pw(e)){for(var I="<"+Qu.call(String(e.nodeName)),b=e.attributes||[],$=0;$<b.length;$++)I+=" "+b[$].name+"="+of(pw(b[$].value),"double",s);return I+=">",e.childNodes&&e.childNodes.length&&(I+="..."),I+="</"+Qu.call(String(e.nodeName))+">",I}if(Zo(e)){if(e.length===0)return"[]";var h=Tn(e,g);return d&&!Aw(h)?"["+ts(h,d)+"]":"[ "+Ge.call(h,", ")+" ]"}if(gw(e)){var p=Tn(e,g);return!("cause"in Error.prototype)&&"cause"in e&&!Zu.call(e,"cause")?"{ ["+String(e)+"] "+Ge.call(Xu.call("[cause]: "+g(e.cause),p),", ")+" }":p.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ge.call(p,", ")+" }"}if(typeof e=="object"&&a){if(nf&&typeof e[nf]=="function"&&Jo)return Jo(e,{depth:c-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Sw(e)){var v=[];return rw.call(e,function(le,x){v.push(g(x,e,!0)+" => "+g(le,e))}),ff("Map",In.call(e),v,d)}if(Ow(e)){var E=[];return nw.call(e,function(le){E.push(g(le,e))}),ff("Set",Pn.call(e),E,d)}if(Ew(e))return es("WeakMap");if(Iw(e))return es("WeakSet");if($w(e))return es("WeakRef");if(mw(e))return Ir(g(Number(e)));if(bw(e))return Ir(g(Qo.call(e)));if(_w(e))return Ir(aw.call(e));if(yw(e))return Ir(g(String(e)));if(!vw(e)&&!sf(e)){var O=Tn(e,g),w=ef?ef(e)===Object.prototype:e instanceof Object||e.constructor===Object,T=e instanceof Object?"":"null prototype",L=!w&&we&&Object(e)===e&&we in e?Ko.call(rt(e),8,-1):T?"Object":"",k=w||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",te=k+(L||T?"["+Ge.call(Xu.call([],L||[],T||[]),": ")+"] ":"");return O.length===0?te+"{}":d?te+"{"+ts(O,d)+"}":te+"{ "+Ge.call(O,", ")+" }"}return String(e)};function of(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function pw(r){return et.call(String(r),/"/g,"&quot;")}function Zo(r){return rt(r)==="[object Array]"&&(!we||!(typeof r=="object"&&we in r))}function vw(r){return rt(r)==="[object Date]"&&(!we||!(typeof r=="object"&&we in r))}function sf(r){return rt(r)==="[object RegExp]"&&(!we||!(typeof r=="object"&&we in r))}function gw(r){return rt(r)==="[object Error]"&&(!we||!(typeof r=="object"&&we in r))}function yw(r){return rt(r)==="[object String]"&&(!we||!(typeof r=="object"&&we in r))}function mw(r){return rt(r)==="[object Number]"&&(!we||!(typeof r=="object"&&we in r))}function _w(r){return rt(r)==="[object Boolean]"&&(!we||!(typeof r=="object"&&we in r))}function af(r){if(Vt)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!Xo)return!1;try{return Xo.call(r),!0}catch{}return!1}function bw(r){if(!r||typeof r!="object"||!Qo)return!1;try{return Qo.call(r),!0}catch{}return!1}var ww=Object.prototype.hasOwnProperty||function(r){return r in this};function tt(r,e){return ww.call(r,e)}function rt(r){return lw.call(r)}function xw(r){if(r.name)return r.name;var e=fw.call(uw.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function lf(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function Sw(r){if(!In||!r||typeof r!="object")return!1;try{In.call(r);try{Pn.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function Ew(r){if(!$r||!r||typeof r!="object")return!1;try{$r.call(r,$r);try{Or.call(r,Or)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function $w(r){if(!Ku||!r||typeof r!="object")return!1;try{return Ku.call(r),!0}catch{}return!1}function Ow(r){if(!Pn||!r||typeof r!="object")return!1;try{Pn.call(r);try{In.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function Iw(r){if(!Or||!r||typeof r!="object")return!1;try{Or.call(r,Or);try{$r.call(r,$r)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function Pw(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function uf(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return uf(Ko.call(r,0,e.maxStringLength),e)+n}var i=et.call(et.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Tw);return of(i,"single",e)}function Tw(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+cw.call(e.toString(16))}function Ir(r){return"Object("+r+")"}function es(r){return r+" { ? }"}function ff(r,e,t,n){var i=n?ts(t,n):Ge.call(t,", ");return r+" ("+e+") {"+i+"}"}function Aw(r){for(var e=0;e<r.length;e++)if(lf(r[e],`
`)>=0)return!1;return!0}function Rw(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=Ge.call(Array(r.indent+1)," ");else return null;return{base:t,prev:Ge.call(Array(e+1),t)}}function ts(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+Ge.call(r,","+t)+`
`+e.prev}function Tn(r,e){var t=Zo(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=tt(r,i)?e(r[i],r):""}var s=typeof Ho=="function"?Ho(r):[],a;if(Vt){a={};for(var l=0;l<s.length;l++)a["$"+s[l]]=s[l]}for(var f in r)!tt(r,f)||t&&String(Number(f))===f&&f<r.length||Vt&&a["$"+f]instanceof Symbol||(Hu.call(/[^\w$]/,f)?n.push(e(f,r)+": "+e(r[f],r)):n.push(f+": "+e(r[f],r)));if(typeof Ho=="function")for(var u=0;u<s.length;u++)Zu.call(r,s[u])&&n.push("["+e(s[u])+"]: "+e(r[s[u]],r));return n}const rs=dw,An=Symbol("CoordinateSystem"),ns=Symbol("RAW");class Ee{constructor(e,t){zt(this,"positive");zt(this,"name");zt(this,"embeddings",new Map);this.positive=e,this.name=t||"unnamed coordinate system"}defineEmbedding(e,t){t===void 0&&(t=this.positive===e.positive?new o.Matrix:new o.Matrix(1,0,0,-1)),this.embeddings.set(e,t),e.embeddings.set(this,Ee.inverse(t))}point(...e){return this.embed(new o.Point(...e))}vector(...e){return e=e.map(t=>this.unwrapArgument(t)),this.embed(new o.Vector(...e))}segment(...e){return e=e.map(t=>this.unwrapArgument(t)),this.embed(new o.Segment(...e))}line(...e){return e=e.map(t=>this.unwrapArgument(t)),this.embed(new o.Line(...e))}box(...e){return e=e.map(t=>this.unwrapArgument(t)),this.embed(new o.Box(...e))}polygon(...e){return e=e.map(t=>this.unwrapArgument(t)),this.embed(new o.Polygon(...e))}static isCoordinateSystemProxy(e){return An in e}static withoutCoordinateSystem(e){return Ee.isCoordinateSystemProxy(e)?e[ns]:e}static parent(e){return Ee.isCoordinateSystemProxy(e)?e[An]:null}discover(e){if(this.embeddings.has(e))return this.embeddings.get(e);throw Error("not implemented: discover()")}createProxy(e){const t=this;if(Ee.parent(e)!==null)throw Error("object is already a coordinate system proxy");return new Proxy(e,{has(i,s){return s===An||s===ns?!0:s in i},get(i,s,a){if(s===An)return t;if(s===ns)return console.assert(!Ee.isCoordinateSystemProxy(i)),i;const l=Reflect.get(i,s,a);return s==="toJSON"?l:typeof l=="function"?new Proxy(l,{apply(f,u,c){try{return u=Ee.withoutCoordinateSystem(u),c=c.map(d=>t.unwrapArgument(d)),t.wrapReturnValue(f.bind(u)(...c))}catch(d){throw new Q0(`failed to invoke ${f} with arguments ${rs(c)}`,d)}}}):Vo(l)?t.embed(l):l}})}embed(e){const t=Ee.parent(e);if(t===this)return e;if(t===null)return this.createProxy(e);if(!Vo(e))throw Error("cannot embed this kind of object into a coordinate system yet");const n=t.discover(this);if(n===null)throw Error("No embedding between these coordinate systems");if(console.assert(n.tx!=null&&n.ty!=null&&n.a*n.d-n.b*n.c,"Discovered an embedding that is not invertible.",n),H0(e)||J0(e)||ew(e))return this.embed(Ee.withoutCoordinateSystem(e).transform(n));if(X0(e))return this.vector(t.point(0,0),t.point(e.x,e.y));if(Z0(e))return this.line(e.pt,e.norm);if(Go(e)){const i=this.unwrapArgument(e.toPoints()),s=this.polygon(i);return new Set(i.map(a=>a.x)).size!==2||new Set(i.map(a=>a.y)).size!==2?s:s.box}throw Error("cannot embed this kind of geometric primitive yet")}unwrapArgument(e){return this.wrapReturnValue(e,!0)}wrapReturnValue(e,t=!1){if(Vo(e)){let n=this.embed(e);if(t&&(n=Ee.withoutCoordinateSystem(n)),Go(e)&&!Go(n))throw Error(`cannot automatically convert box ${rs(e)} since it converts to a polygon and thus changed type`);return n}if(typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e==null)return e;if(Array.isArray(e))return e.map(n=>this.wrapReturnValue(n,t));throw Error(`cannot automatically translate ${rs(e)} into this coordinate system yet`)}static inverse(e){const[t,n,i,s,a,l,f,u,c]=[e.a,e.c,e.tx,e.b,e.d,e.ty,0,0,1],d=[a*c-u*l,s*c-f*l,s*u-f*a,n*c-u*i,t*c-f*i,t*u-f*n,n*l-a*i,t*l-s*i,t*a-s*n],g=t*d[0]-n*d[1]+i*d[2],S=[d[0],-d[3],d[6],-d[1],d[4],-d[7],d[2],-d[5],d[8]].map(_=>_/g),m=S.map(_=>_/S[8]);return console.assert(m.every(_=>_!=null),`Matrix ${e} must be invertible.`),new o.Matrix(m[0],m[3],m[1],m[4],m[2],m[5])}}const cf=Symbol("VIEWPORT");class hf{constructor(e,t){zt(this,"idealCoordinateSystem");zt(this,"clientCoordinateSystem");e===void 0&&(e=new Ee(!0,"ideal")),t===void 0&&(t=new Ee(!1,"client"),t.defineEmbedding(e)),this.idealCoordinateSystem=e,this.clientCoordinateSystem=t}static use(e){if(e==null){if(e=q.inject(cf),e===void 0)throw Error("Parent component must inject viewport with Viewport.use()")}else q.provide(cf,e);return{viewport:e,idealCoordinateSystem:e.idealCoordinateSystem,clientCoordinateSystem:e.clientCoordinateSystem}}drag(e){const t=this.idealCoordinateSystem.discover(this.clientCoordinateSystem);if(t==null)throw Error("cannot drag, coordinate systems not embedded into each other");e=this.clientCoordinateSystem.embed(e),t.tx-=e.x,t.ty-=e.y,this.idealCoordinateSystem.defineEmbedding(this.clientCoordinateSystem,t)}zoom(e,t){let n=this.idealCoordinateSystem.discover(this.clientCoordinateSystem);if(n==null)throw Error("cannot zoom, coordinate systems not embedded into each other");if(t===void 0)throw new Error("not implemented: zoom without center");{const i=this.clientCoordinateSystem.embed(t),s=this.idealCoordinateSystem.embed(i);n=n.multiply(new o.Matrix(e,0,0,e));const a=this.clientCoordinateSystem.vector(i,Ee.withoutCoordinateSystem(s).transform(n));n.tx-=a.x,n.ty-=a.y,this.idealCoordinateSystem.defineEmbedding(this.clientCoordinateSystem,n)}}}var df={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(window,function(){return function(t){var n={};function i(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=n,i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(1&a&&(s=i(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var f in s)i.d(l,f,function(u){return s[u]}.bind(null,f));return l},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=9)}([function(t,n,i){var s=i(7);t.exports=s&&function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{a=!1}return a}()},function(t,n,i){var s,a=typeof Reflect=="object"?Reflect:null,l=a&&typeof a.apply=="function"?a.apply:function(h,p,v){return Function.prototype.apply.call(h,p,v)};s=a&&typeof a.ownKeys=="function"?a.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)};var f=Number.isNaN||function(h){return h!=h};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(h,p){return new Promise(function(v,E){function O(){w!==void 0&&h.removeListener("error",w),v([].slice.call(arguments))}var w;p!=="error"&&(w=function(T){h.removeListener(p,O),E(T)},h.once("error",w)),h.once(p,O)})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function d(h){if(typeof h!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function g(h){return h._maxListeners===void 0?u.defaultMaxListeners:h._maxListeners}function S(h,p,v,E){var O,w,T,L;if(d(v),(w=h._events)===void 0?(w=h._events=Object.create(null),h._eventsCount=0):(w.newListener!==void 0&&(h.emit("newListener",p,v.listener?v.listener:v),w=h._events),T=w[p]),T===void 0)T=w[p]=v,++h._eventsCount;else if(typeof T=="function"?T=w[p]=E?[v,T]:[T,v]:E?T.unshift(v):T.push(v),(O=g(h))>0&&T.length>O&&!T.warned){T.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=h,k.type=p,k.count=T.length,L=k,console&&console.warn&&console.warn(L)}return h}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(h,p,v){var E={fired:!1,wrapFn:void 0,target:h,type:p,listener:v},O=m.bind(E);return O.listener=v,E.wrapFn=O,O}function I(h,p,v){var E=h._events;if(E===void 0)return[];var O=E[p];return O===void 0?[]:typeof O=="function"?v?[O.listener||O]:[O]:v?function(w){for(var T=new Array(w.length),L=0;L<T.length;++L)T[L]=w[L].listener||w[L];return T}(O):$(O,O.length)}function b(h){var p=this._events;if(p!==void 0){var v=p[h];if(typeof v=="function")return 1;if(v!==void 0)return v.length}return 0}function $(h,p){for(var v=new Array(p),E=0;E<p;++E)v[E]=h[E];return v}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(h){if(typeof h!="number"||h<0||f(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");c=h}}),u.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||f(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},u.prototype.getMaxListeners=function(){return g(this)},u.prototype.emit=function(h){for(var p=[],v=1;v<arguments.length;v++)p.push(arguments[v]);var E=h==="error",O=this._events;if(O!==void 0)E=E&&O.error===void 0;else if(!E)return!1;if(E){var w;if(p.length>0&&(w=p[0]),w instanceof Error)throw w;var T=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw T.context=w,T}var L=O[h];if(L===void 0)return!1;if(typeof L=="function")l(L,this,p);else{var k=L.length,te=$(L,k);for(v=0;v<k;++v)l(te[v],this,p)}return!0},u.prototype.addListener=function(h,p){return S(this,h,p,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(h,p){return S(this,h,p,!0)},u.prototype.once=function(h,p){return d(p),this.on(h,_(this,h,p)),this},u.prototype.prependOnceListener=function(h,p){return d(p),this.prependListener(h,_(this,h,p)),this},u.prototype.removeListener=function(h,p){var v,E,O,w,T;if(d(p),(E=this._events)===void 0)return this;if((v=E[h])===void 0)return this;if(v===p||v.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete E[h],E.removeListener&&this.emit("removeListener",h,v.listener||p));else if(typeof v!="function"){for(O=-1,w=v.length-1;w>=0;w--)if(v[w]===p||v[w].listener===p){T=v[w].listener,O=w;break}if(O<0)return this;O===0?v.shift():function(L,k){for(;k+1<L.length;k++)L[k]=L[k+1];L.pop()}(v,O),v.length===1&&(E[h]=v[0]),E.removeListener!==void 0&&this.emit("removeListener",h,T||p)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(h){var p,v,E;if((v=this._events)===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[h]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete v[h]),this;if(arguments.length===0){var O,w=Object.keys(v);for(E=0;E<w.length;++E)(O=w[E])!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=v[h])=="function")this.removeListener(h,p);else if(p!==void 0)for(E=p.length-1;E>=0;E--)this.removeListener(h,p[E]);return this},u.prototype.listeners=function(h){return I(this,h,!0)},u.prototype.rawListeners=function(h){return I(this,h,!1)},u.listenerCount=function(h,p){return typeof h.listenerCount=="function"?h.listenerCount(p):b.call(h,p)},u.prototype.listenerCount=b,u.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},function(t,n){var i={left:0,top:0};t.exports=function(s,a,l){a=a||s.currentTarget||s.srcElement,Array.isArray(l)||(l=[0,0]);var f=s.clientX||0,u=s.clientY||0,c=(d=a,d===window||d===document||d===document.body?i:d.getBoundingClientRect()),d;return l[0]=f-c.left,l[1]=u-c.top,l}},function(t,n){t.exports=function(i,s){return{configurable:!0,enumerable:!0,get:i,set:s}}},function(t,n){t.exports=function(i,s){var a=s[0]-i[0],l=s[1]-i[1];return Math.sqrt(a*a+l*l)}},function(t,n,i){var s=i(2),a=i(1).EventEmitter;function l(f){var u=(f=f||{}).element||window,c=new a,d=f.position||[0,0];return f.touchstart!==!1&&(u.addEventListener("mousedown",S,!1),u.addEventListener("touchstart",g,!1)),u.addEventListener("mousemove",S,!1),u.addEventListener("touchmove",g,!1),c.position=d,c.dispose=function(){u.removeEventListener("mousemove",S,!1),u.removeEventListener("mousedown",S,!1),u.removeEventListener("touchmove",g,!1),u.removeEventListener("touchstart",g,!1)},c;function g(m){S(m.targetTouches[0])}function S(m){s(m,u,d),c.emit("move",m)}}t.exports=function(f){return l(f).position},t.exports.emitter=function(f){return l(f)}},function(t,n,i){(function(s){var a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,d=typeof s=="object"&&s&&s.Object===Object&&s,g=typeof self=="object"&&self&&self.Object===Object&&self,S=d||g||Function("return this")(),m=Object.prototype.toString,_=Math.max,I=Math.min,b=function(){return S.Date.now()};function $(p){var v=typeof p;return!!p&&(v=="object"||v=="function")}function h(p){if(typeof p=="number")return p;if(function(O){return typeof O=="symbol"||function(w){return!!w&&typeof w=="object"}(O)&&m.call(O)=="[object Symbol]"}(p))return NaN;if($(p)){var v=typeof p.valueOf=="function"?p.valueOf():p;p=$(v)?v+"":v}if(typeof p!="string")return p===0?p:+p;p=p.replace(a,"");var E=f.test(p);return E||u.test(p)?c(p.slice(2),E?2:8):l.test(p)?NaN:+p}t.exports=function(p,v,E){var O,w,T,L,k,te,le=0,x=!1,C=!1,y=!0;if(typeof p!="function")throw new TypeError("Expected a function");function R(G){var J=O,ne=w;return O=w=void 0,le=G,L=p.apply(ne,J)}function M(G){return le=G,k=setTimeout(Z,v),x?R(G):L}function X(G){var J=G-te;return te===void 0||J>=v||J<0||C&&G-le>=T}function Z(){var G=b();if(X(G))return re(G);k=setTimeout(Z,function(J){var ne=v-(J-te);return C?I(ne,T-(J-le)):ne}(G))}function re(G){return k=void 0,y&&O?R(G):(O=w=void 0,L)}function Y(){var G=b(),J=X(G);if(O=arguments,w=this,te=G,J){if(k===void 0)return M(te);if(C)return k=setTimeout(Z,v),R(te)}return k===void 0&&(k=setTimeout(Z,v)),L}return v=h(v)||0,$(E)&&(x=!!E.leading,T=(C="maxWait"in E)?_(h(E.maxWait)||0,v):T,y="trailing"in E?!!E.trailing:y),Y.cancel=function(){k!==void 0&&clearTimeout(k),le=0,O=te=w=k=void 0},Y.flush=function(){return k===void 0?L:re(b())},Y}}).call(this,i(8))},function(t,n){t.exports=!0},function(t,n){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}t.exports=i},function(t,n,i){i.r(n);var s=i(1),a=i(0),l=i.n(a);function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(x)}function u(x,C){return(u=Object.setPrototypeOf||function(y,R){return y.__proto__=R,y})(x,C)}function c(x){var C=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var y,R=S(x);if(C){var M=S(this).constructor;y=Reflect.construct(R,arguments,M)}else y=R.apply(this,arguments);return d(this,y)}}function d(x,C){return!C||f(C)!=="object"&&typeof C!="function"?g(x):C}function g(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function S(x){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(x)}var m=!!l.a&&{capture:!1,passive:!0},_=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(x){window.setTimeout(x,1e3/60)};window.addEventListener("touchmove",function(){});var I=function(x){(function(R,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(M&&M.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),M&&u(R,M)})(y,x);var C=c(y);function y(R){var M,X,Z,re,Y,G,J,ne,ee,ie,H,j,xe=R.source,oe=xe===void 0?document:xe,D=R.update,ce=R.multiplier,Le=ce===void 0?1:ce,Pe=R.friction,nt=Pe===void 0?.92:Pe,U=R.initialValues,F=R.boundX,V=R.boundY,se=R.bounce,Ce=se===void 0||se;(function(A,B){if(!(A instanceof B))throw new TypeError("Cannot call a class as a function")})(this,y),M=C.call(this);var Q=0,N=0,Ne=.3*Le,Be=!1,he=!1,ye=!1,it=!1,Me=[],Qe=null;(function(){if(!(oe=typeof oe=="string"?document.querySelector(oe):oe))throw new Error("IMPETUS: source not found.");if(!D)throw new Error("IMPETUS: update function not defined.");U&&(U[0]&&(Q=U[0]),U[1]&&(N=U[1]),Tr()),F&&(X=F[0],Z=F[1]),V&&(re=V[0],Y=V[1]),oe.addEventListener("touchstart",yt,m),oe.addEventListener("mousedown",yt,m)})();var Pr=M.emit.bind(g(M));function Gt(){document.removeEventListener("touchmove",mt,!!l.a&&{passive:!1}),document.removeEventListener("touchend",qt,m),document.removeEventListener("touchcancel",Rr,m),document.removeEventListener("mousemove",mt,!!l.a&&{passive:!1}),document.removeEventListener("mouseup",qt,m)}function Tr(){D.call(oe,Q,N,Qe)}function Ar(A){if(A.type==="touchmove"||A.type==="touchstart"||A.type==="touchend"){var B=A.targetTouches[0]||A.changedTouches[0];return{x:B.clientX,y:B.clientY,id:B.identifier}}return{x:A.clientX,y:A.clientY,id:null}}function yt(A){Qe=A;var B=Ar(A);he||ye||(he=!0,it=!1,ie=B.id,G=ne=B.x,J=ee=B.y,Me=[],ot(G,J),Gt(),document.addEventListener("touchmove",mt,!!l.a&&{passive:!1}),document.addEventListener("touchend",qt,m),document.addEventListener("touchcancel",Rr,m),document.addEventListener("mousemove",mt,!!l.a&&{passive:!1}),document.addEventListener("mouseup",qt,m),Pr("start",{x:ne,y:ee,event:Qe}))}function mt(A){A.preventDefault(),Qe=A;var B=Ar(A);he&&B.id===ie&&(ne=B.x,ee=B.y,ot(G,J),function(){Be||_(Rn),Be=!0}())}function qt(A){Qe=A;var B=Ar(A);he&&B.id===ie&&Rr()}function Rr(){he=!1,ot(G,J),function(){var A=Me[0],B=Me[Me.length-1],de=B.x-A.x,Mw=B.y-A.y,gf=(B.time-A.time)/15/Le;H=de/gf||0,j=Mw/gf||0;var kw=Wt();Math.abs(H)>1||Math.abs(j)>1||!kw.inBounds?(it=!0,_(vf)):Pr("end",{x:Q,y:N,event:Qe})}(),Gt()}function ot(A,B){for(var de=Date.now();Me.length>0&&!(de-Me[0].time<=100);)Me.shift();Me.push({x:A,y:B,time:de})}function Rn(){var A=ne-G,B=ee-J;if(Q+=A*Le,N+=B*Le,Ce){var de=Wt();de.x!==0&&(Q-=A*Lr(de.x)*Le),de.y!==0&&(N-=B*Lr(de.y)*Le)}else Wt(!0);Tr(),G=ne,J=ee,Be=!1}function Lr(A){return 5e-6*Math.pow(A,2)+1e-4*A+.55}function Wt(A){var B=0,de=0;return X!==void 0&&Q<X?B=X-Q:Z!==void 0&&Q>Z&&(B=Z-Q),re!==void 0&&N<re?de=re-N:Y!==void 0&&N>Y&&(de=Y-N),A&&(B!==0&&(Q=B>0?X:Z),de!==0&&(N=de>0?re:Y)),{x:B,y:de,inBounds:B===0&&de===0}}function vf(){if(it){Q+=H*=nt,N+=j*=nt;var A=Wt();if(Math.abs(H)>Ne||Math.abs(j)>Ne||!A.inBounds){if(Ce){if(A.x!==0)if(A.x*H<=0)H+=.04*A.x;else{var B=A.x>0?2.5:-2.5;H=.11*(A.x+B)}if(A.y!==0)if(A.y*j<=0)j+=.04*A.y;else{var de=A.y>0?2.5:-2.5;j=.11*(A.y+de)}}else A.x!==0&&(Q=A.x>0?X:Z,H=0),A.y!==0&&(N=A.y>0?re:Y,j=0);Tr(),_(vf)}else it=!1,Pr("end",{x:Q,y:N,event:Qe})}}return M.destroy=function(){return oe.removeEventListener("touchstart",yt),oe.removeEventListener("mousedown",yt),Gt(),null},M.pause=function(){Gt(),he=!1,ye=!0},M.resume=function(){ye=!1},M.setValues=function(A,B){typeof A=="number"&&(Q=A),typeof B=="number"&&(N=B)},M.setMultiplier=function(A){Ne=.3*(Le=A)},M.setBoundX=function(A){X=A[0],Z=A[1]},M.setBoundY=function(A){re=A[0],Y=A[1]},M}return y}(s.EventEmitter),b=i(4),$=i.n(b),h=i(3),p=i.n(h),v=i(2),E=i.n(v),O=!!l.a&&{capture:!1,passive:!0};function w(){this.position=[0,0],this.touch=null}var T=function(x){x=x||window;var C=new s.EventEmitter,y=[null,null],R=0,M=0,X=!1,Z=!1;return Object.defineProperties(C,{pinching:p()(function(){return R===2}),fingers:p()(function(){return y})}),Y(),C.enable=Y,C.disable=function(){!Z||(Z=!1,R=0,y[0]=null,y[1]=null,M=0,X=!1,x.removeEventListener("touchstart",G,O),x.removeEventListener("touchmove",J,O),x.removeEventListener("touchend",ne,O),x.removeEventListener("touchcancel",ne,O))},C.indexOfTouch=re,C;function re(ie){for(var H=ie.identifier,j=0;j<y.length;j++)if(y[j]&&y[j].touch&&y[j].touch.identifier===H)return j;return-1}function Y(){Z||(Z=!0,x.addEventListener("touchstart",G,O),x.addEventListener("touchmove",J,O),x.addEventListener("touchend",ne,O),x.addEventListener("touchcancel",ne,O))}function G(ie){for(var H=0;H<ie.changedTouches.length;H++){var j=ie.changedTouches[H];if(re(j.identifier)===-1&&R<2){var xe=R===0,oe=y[0]?1:0,D=y[0]?0:1,ce=new w;y[oe]=ce,R++,ce.touch=j,E()(j,x,ce.position);var Le=y[D]?y[D].touch:void 0;if(C.emit("place",j,Le),!xe){var Pe=ee();X=!1,C.emit("start",Pe,ie),M=Pe}}}}function J(ie){for(var H=!1,j=0;j<ie.changedTouches.length;j++){var xe=ie.changedTouches[j],oe=re(xe);oe!==-1&&(H=!0,y[oe].touch=xe,E()(xe,x,y[oe].position))}if(R===2&&H){var D=ee();C.emit("change",D,M,ie),M=D}}function ne(ie){for(var H=0;H<ie.changedTouches.length;H++){var j=ie.changedTouches[H],xe=re(j);if(xe!==-1){y[xe]=null,R--;var oe=xe===0?1:0,D=y[oe]?y[oe].touch:void 0;C.emit("lift",j,D,ie)}}X||R===2||(X=!0,C.emit("end",M,ie))}function ee(){return R<2?0:$()(y[0].position,y[1].position)}},L=i(5),k=i.n(L),te=i(6),le=i.n(te);n.default=function(x,C,y){function R(U){y.onStart&&y.onStart(U)}function M(U){y.onEnd&&requestAnimationFrame(function(){y.onEnd(U)})}x instanceof Function&&(C=x,x=document.documentElement||document.body),y||(y={});var X=null,Z=null,re=null;typeof x=="string"&&(x=document.querySelector(x));var Y,G,J=k.a.emitter();function ne(U){return U||(U=x.getBoundingClientRect()),{x:J.position[0]-U.x,y:J.position[1]-U.y}}var ee={x:0,y:0,px:0,py:0},ie=0,H=0;(Y=new I({source:x,update:function(U,F,V){var se=ne(x.getBoundingClientRect()),Ce={srcElement:G,event:V,target:x,type:"mouse",dx:U-ie,dy:F-H,dz:0,x:se.x,y:se.y,x0:ee.x,y0:ee.y,px0:ee.px,py0:ee.py};ie=U,H=F,C(Ce)},multiplier:y.friction||1,friction:y.multiplier||.75,boundX:y.boundX,boundY:y.boundY,bounce:y.bounce})).on("start",function(U){var F=U.event,V=x.getBoundingClientRect(),se=ne(V);ee={x:se.x,y:se.y,px:se.x/V.width,py:se.y/V.height},R({srcElement:G=F.srcElement,event:F,target:x,type:"mouse",dx:0,dy:0,dz:0,x:se.x,y:se.y,x0:ee.x,y0:ee.y,px0:ee.px,py0:ee.py})}),Y.on("end",function(U){var F=U.event,V=ne();M({srcElement:G,event:F,target:x,type:"mouse",dx:0,dy:0,dz:0,x:V.x,y:V.y,x0:ee.x,y0:ee.y,px0:ee.px,py0:ee.py})});var j=null;function xe(){if(j)return j;var U=function(F){y.passive||F.preventDefault();var V=x.getBoundingClientRect(),se=F.clientX-V.x,Ce=F.clientY-V.y,Q=function(N){N||(N={});var Ne=x.getBoundingClientRect(),Be=ne(Ne),he=Z||{},ye=re||{},it=N.x!=null?N.x:Be.x,Me=N.y!=null?N.y:Be.y,Qe=ye.x!=null?ye.x:it,Pr=ye.y!=null?ye.y:Me,Gt=N.dx!=null?N.dx:it-Qe,Tr=N.dy!=null?N.dy:Me-Pr,Ar=N.dz!=null?N.dz:0,yt=he.x0!=null?he.x0:N.x0!=null?N.x0:Be.x,mt=he.y0!=null?he.y0:N.y0!=null?N.y0:Be.y,qt=he.px0!=null?he.px0:yt/Ne.width,Rr=he.py0!=null?he.py0:mt/Ne.height,ot={type:N.type||"mouse",srcElement:N.srcElement||x,target:x,event:N.event,x:it,y:Me,dx:Gt,dy:Tr,dz:Ar,x0:yt,y0:mt,px0:qt,py0:Rr},Rn=!1;X||(Rn=!0,Z=re=ot,R(ot),X=le()(function(Wt){M(Wt),X=null,Z=null,re=null},60)),X(ot);var Lr={isStart:Rn,init:Z,last:re,event:ot};return re=Lr.event,Lr}({dx:0,dy:0,dz:.5*F.deltaY,x:se,y:Ce,x0:se,y0:Ce,srcElement:F.srcElement,event:F,type:"mouse"});C(Q.event)};return x.addEventListener("wheel",U,{passive:!!y.passive}),U}function oe(){j&&(j=x.removeEventListener("wheel",j,{passive:!0}))}j=xe();var D,ce=T();function Le(){return function(U){var F,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=se.threshold||500,Q=function(N){F?(F=clearTimeout(F),U&&U(N)):F=setTimeout(function(){F=null},Ce)};return V.addEventListener("click",Q,{passive:!0}),function(){return V.removeEventListener("click",Q,{passive:!0}),null}}(function(){var U,F=x.getBoundingClientRect(),V=ne(F);U={srcElement:x,target:x,type:"mouse",dx:0,dy:0,dz:0,x:V.x,y:V.x,x0:V.x,y0:V.x,px0:V.x/F.width,py0:V.y/F.height},y.onDoubleTap&&y.onDoubleTap(U)},x)}ce.on("start",function(U,F){var V,se,Ce=(V=ce.fingers[0],[.5*(se=ce.fingers[1]).position[0]+.5*V.position[0],.5*se.position[1]+.5*V.position[1]]),Q=x.getBoundingClientRect(),N=Ce[0],Ne=Ce[1];(function(Be,he,ye){return ye||(ye=x.getBoundingClientRect()),Be>=ye.x&&Be<=ye.x+ye.width&&he>=ye.y&&he<=ye.y+ye.height})(N,Ne,Q)&&(N-=Q.x,Ne-=Q.y,D={x:N,y:Ne,px0:N/Q.width,py0:Ne/Q.height},Y&&Y.pause(),R({srcElement:F.srcElement,event:F,target:x,type:"touch",dx:0,dy:0,dz:0,x:D.x,y:D.y,x0:D.x,y0:D.y,px0:D.px0,py0:D.py0}))}),ce.on("end",function(U,F){D&&(Y&&Y.resume(),M({srcElement:F.srcElement,event:F,target:x,type:"touch",dx:0,dy:0,dz:0,x:D.x,y:D.y,x0:D.x,y0:D.y,px0:D.px0,py0:D.py0}),D=null)}),ce.on("change",function(U,F,V){ce.pinching&&D&&C({srcElement:x,event:V,target:x,type:"touch",dx:0,dy:0,dz:1.3*-(U-F),x:D.x,y:D.x,x0:D.x,y0:D.x,px0:D.px0,py0:D.py0})});var Pe=Le(),nt=function(){J.dispose(),Y.destroy(),oe(),Pe&&(Pe=Pe()),ce.disable()};return nt.disablePan=function(){Y&&Y.pause()},nt.enablePan=function(){Y&&Y.resume()},nt.disableZoom=function(){ce&&ce.disable(),oe(),Pe&&(Pe=Pe())},nt.enableZoom=function(){ce&&ce.enable(),j=xe(),Pe=Le()},nt}}])})})(df);const Lw=Ic(df.exports),Cw=q.defineComponent({__name:"PanZoom",emits:["zoom","drag","start","end"],setup(r,{emit:e}){const t=q.ref(!1);let n=null;const i=q.ref();return q.onMounted(()=>{navigator.userAgent.includes("jsdom")||(n=Lw(i.value,s=>{if(s.dz!==0){e("zoom",Math.exp(-s.dz/256),new o.Point(s.x,s.y));return}e("drag",new o.Vector(-s.dx,-s.dy))},{onStart(){e("start")},onEnd(){e("end")}}))}),q.onBeforeUnmount(()=>{n()}),(s,a)=>(q.openBlock(),q.createElementBlock("div",{class:q.normalizeClass(["pan-zoom",{pan:t.value}]),ref_key:"container",ref:i,onMousedown:a[0]||(a[0]=l=>t.value=!0),onMouseup:a[1]||(a[1]=l=>t.value=!1),onMouseout:a[2]||(a[2]=l=>t.value=!1)},[q.renderSlot(s.$slots,"default",{},void 0,!0)],34))}}),Gw="",pf=((r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t})(Cw,[["__scopeId","data-v-153adf05"]]),Nw=q.defineComponent({__name:"PanZoomViewport",setup(r){const e=q.ref(new hf);function t(i,s){e.value.zoom(i,s)}function n(i){e.value.drag(i)}return(i,s)=>(q.openBlock(),q.createBlock(pf,{onZoom:t,onDrag:n},{default:q.withCtx(()=>[q.renderSlot(i.$slots,"default",{viewport:e.value})]),_:3}))}});me.CartesianCoordinateSystem=Ee,me.PanZoom=pf,me.PanZoomViewport=Nw,me.Viewport=hf,Object.defineProperties(me,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
